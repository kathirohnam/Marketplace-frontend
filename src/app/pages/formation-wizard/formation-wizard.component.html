<div
  class="row"
  [ngClass]="{
    'ein-fullscreen':
      ((activeStepIndex === 16 || activeStepIndex === 17) &&
        getManagementStyleFromSessionStorage() === 'member') ||
      ((activeStepIndex === 17 || activeStepIndex === 18) &&
        getManagementStyleFromSessionStorage() === 'manager')
  }"
>
  <!-- Left Column (Stepper) -->
  <div class="col-lg-8 left-column">
    <mat-card class="shadow-none bg-white overflow-hidden">
      <mat-card-content class="p-32">
        <mat-stepper
          #stepper
          [linear]="false"
          [selectedIndex]="activeStepIndex"
        >
          <!-- Step 1: Start Your Business -->
          <mat-step label="Start Your Business">
            <h2 class="wizard-title">Let’s Begin with Your LLC Information</h2>

            <p class="wizard-description">
              Choose the state where you want to set up your LLC.<br />
              We’ll guide you through the rest.
            </p>
            <br />

            <form [formGroup]="stateFormGroup">
              <div class="row align-items-center g-2">
                <!-- State Dropdown -->
                <div class="col-12 col-md-5">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Choose a State</mat-label>
                    <input
                      type="text"
                      matInput
                      formControlName="stateCtrl"
                      [matAutocomplete]="auto"
                      [errorStateMatcher]="errorStateMatcher"
                      required
                    />
                    <mat-autocomplete #auto="matAutocomplete">
                      <mat-option
                        *ngFor="
                          let state of filteredStates | async;
                          let i = index
                        "
                        [value]="state"
                        [ngClass]="{ 'hovered-option': hoveredIndex === i }"
                        (mouseover)="hoveredIndex = i"
                        (mouseleave)="hoveredIndex = null"
                      >
                        {{ state }}
                      </mat-option>
                    </mat-autocomplete>

                    <mat-error
                      *ngIf="
                        stateFormGroup
                          .get('stateCtrl')
                          ?.hasError('invalidState')
                      "
                    >
                      Select valid state
                    </mat-error>
                  </mat-form-field>
                </div>

                <!-- Next Button -->
                <div class="col-12 col-md-4" style="margin-bottom: 20px">
                  <button
                    mat-flat-button
                    class="button-all"
                    [disabled]="!stateFormGroup.valid"
                    matStepperNext
                    appAutoFocusNext="companyNameInput"
                  >
                    Next
                  </button>
                </div>
              </div>
            </form>
            <br />
            <div
              class="d-flex align-items-center justify-content-center one flex-column flex-lg-row"
            >
              <img
                src="/assets/state.jpg"
                alt="Select your state to apply for LLC online"
                class="img-fluid shadow rounded-4 border elegant-hover-img responsive-img"
              />
            </div>
          </mat-step>

          <!-- Step 2: Business Name Selection -->
          <mat-step label="Business Name Selection">
            <h2 class="wizard-title">Alright, Brand Your Business</h2>

            <form [formGroup]="businessFormGroup">
              <h4 class="wizard-subtitle">Enter your desired business name</h4>
              <p class="wizard-description">
                This name will represent your LLC and must be unique in your
                chosen state.
              </p>
              <br />
              <mat-form-field appearance="outline" class="width-50">
                <mat-label>Enter Business Name</mat-label>
                <input
                  matInput
                  formControlName="companyName"
                  required
                  [errorStateMatcher]="errorStateMatcher"
                  id="companyNameInput"
                />
                <mat-error
                  *ngIf="
                    businessFormGroup.get('companyName')!.hasError('required')
                  "
                >
                  Oops! Business name can't be empty</mat-error
                >
                <mat-error
                  *ngIf="
                    !businessFormGroup
                      .get('companyName')!
                      .hasError('required') &&
                    businessFormGroup.get('companyName')!.hasError('pattern')
                  "
                >
                  Oops! Business name not state-compliant</mat-error
                >
              </mat-form-field>

              <h4 class="wizard-subtitle">Let's Choose your LLC Suffix</h4>
              <p class="wizard-description">
                This is the part that follows your business name and is required
                by the state to indicate your company’s legal structure.
              </p>
              <br />

              <mat-form-field appearance="outline" class="width-50">
                <mat-label>LLC Suffix</mat-label>
                <mat-select
                  formControlName="llcSuffix"
                  [errorStateMatcher]="errorStateMatcher"
                  required
                >
                  <mat-option
                    *ngFor="let suffix of llcSuffixes"
                    [value]="suffix"
                  >
                    {{ suffix }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="
                    businessFormGroup.get('llcSuffix')?.hasError('required')
                  "
                >
                  LLC Suffix is important
                </mat-error>
              </mat-form-field>
            </form>
            <br />

            <div class="d-flex justify-content-between">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                (click)="checkCompany()"
                [disabled]="isNextDisabled()"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- Step 3: Formation Date Selection -->
          <mat-step label="Formation Date Selection">
            <h2 class="wizard-title">Set the Date to Make It Official!</h2>
            <p class="wizard-description">
              This is the official date your business will be recognized by the
              state. It’s basically the day your
              <strong> "LLC is born”</strong>.You can pick today’s date or a
              future one, depending on your plans.
            </p>

            <div class="row space">
              <div class="col-lg-6 d-flex justify-content-start">
                <form [formGroup]="formationDateFormGroup">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Choose a Date</mat-label>
                    <input
                      matInput
                      [matDatepicker]="picker"
                      placeholder="Choose Date"
                      formControlName="formationDate"
                      [min]="today"
                      (dateChange)="onDateChange()"
                      [errorStateMatcher]="errorStateMatcher"
                      readonly
                      id="formationDateInput"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-error
                      *ngIf="
                        formationDateFormGroup
                          .get('formationDate')!
                          .hasError('required')
                      "
                      >Pick Up a Date</mat-error
                    >
                  </mat-form-field>
                </form>
              </div>
              <div class="col-lg-6 d-flex justify-content-end">
                <img
                  src="/assets/calender.jpg"
                  alt="Filing calendar to track LLC formation and deadlines"
                  class="img-fluid shadow rounded-4 border elegant-hover-img"
                  style="max-width: 320px"
                />
              </div>
            </div>
            <br />
            <div class="d-flex justify-content-between">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="formationDateFormGroup.invalid"
                (click)="saveFormationDate(); goToNextStep(stepper)"
                appAutoFocusNext="tradeNameInput"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- Step 4: Bussiness Description -->
          <mat-step label="Bussiness Description">
            <h2 class="wizard-title">Let’s Get to Know Your Business</h2>
            <p class="wizard-description mb-3">
              Tell us your business's public trade name (DBA), what it primarily
              does, and a brief description of your services or operations. This
              helps define your company’s purpose and activities clearly
            </p>

            <form [formGroup]="businessDescriptionFormGroup">
              <div class="row space">
                <div class="col-sm-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Trade name of business</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="The Name Customers See or Hear"
                      formControlName="tradeName"
                      [errorStateMatcher]="errorStateMatcher"
                      id="tradeNameInput"
                    />

                    <mat-error
                      *ngIf="
                        businessDescriptionFormGroup
                          .get('tradeName')
                          ?.hasError('required')
                      "
                    >
                      Trade name can't be left blank!
                    </mat-error>
                    <mat-error
                      *ngIf="
                        businessDescriptionFormGroup
                          .get('tradeName')
                          ?.hasError('pattern') &&
                        !businessDescriptionFormGroup
                          .get('tradeName')
                          ?.hasError('required')
                      "
                    >
                      Name not valid
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-sm-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Principal activity</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <!-- <input
                      type="text"
                      matInput
                      placeholder="Select principal activity"
                      formControlName="principalActivity"
                      [matAutocomplete]="principalActivityAuto"
                      [errorStateMatcher]="errorStateMatcher"
                      required
                    />
                    <mat-autocomplete
                      #principalActivityAuto="matAutocomplete"
                      [displayWith]="displayActivity"
                    >
                      <mat-option
                        *ngFor="
                          let activity of filteredPrincipalActivities | async;
                          let i = index
                        "
                        [value]="activity"
                        [ngClass]="{
                          'hovered-option': hoveredPrincipalActivityIndex === i
                        }"
                        (mouseover)="hoveredPrincipalActivityIndex = i"
                        (mouseleave)="hoveredPrincipalActivityIndex = null"
                      >
                        {{ activity }}
                      </mat-option>
                    </mat-autocomplete> -->
                    <mat-select
                      formControlName="principalActivity"
                      placeholder="Select Principal Activity"
                      [errorStateMatcher]="errorStateMatcher"
                      required
                    >
                      <mat-option
                        *ngFor="let activity of principalActivities"
                        [value]="activity"
                      >
                        {{ activity }}
                      </mat-option>
                    </mat-select>

                    <mat-error
                      *ngIf="
                        businessDescriptionFormGroup
                          .get('principalActivity')
                          ?.hasError('required')
                      "
                    >
                      Principal activity can't be left blank!
                    </mat-error>
                    <mat-error
                      *ngIf="
                        !businessDescriptionFormGroup
                          .get('principalActivity')
                          ?.hasError('required') &&
                        businessDescriptionFormGroup
                          .get('principalActivity')
                          ?.hasError('pattern')
                      "
                    >
                      Principal activity Invalid!
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                >Business Description</mat-label
              >
              <mat-form-field appearance="outline" style="width: 100%">
                <textarea
                  matInput
                  placeholder="We create custom software for small businesses..."
                  formControlName="businessDescription"
                  maxlength="255"
                  rows="4"
                  [errorStateMatcher]="errorStateMatcher"
                  id="businessdescription"
                ></textarea>
                <mat-hint align="end">
                  {{
                    businessDescriptionFormGroup.get("businessDescription")
                      ?.value?.length || 0
                  }}
                  / 255
                </mat-hint>
                <mat-error
                  *ngIf="
                    businessDescriptionFormGroup
                      .get('businessDescription')
                      ?.hasError('maxlength')
                  "
                >
                  max 255 characters allowed!
                </mat-error>
                <mat-error
                  *ngIf="
                    businessDescriptionFormGroup
                      .get('businessDescription')!
                      .hasError('required')
                  "
                  >Your business story is missing – tell us what you
                  do!</mat-error
                >
              </mat-form-field>
            </form>
            <br />
            <div class="d-flex justify-content-between">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="businessDescriptionFormGroup.invalid"
                (click)="saveFormationDetails(); goToNextStep(stepper)"
                appAutoFocusNext="primaryInput"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!--step5:Primary Contact Information-->
          <mat-step label="Primary Contact Information">
            <h2 class="wizard-title">
              Who's the primary contact for your LLC ?
            </h2>
            <p class="wizard-description">
              We’ll contact this person if more information is needed during the
              filing process.
            </p>

            <form [formGroup]="primaryContactForm">
              <div class="row space">
                <div class="col-sm-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >First Name</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="John"
                      formControlName="firstName"
                      [errorStateMatcher]="errorStateMatcher"
                      maxlength="60"
                      id="primaryInput"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerUser"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('firstName')
                          ?.hasError('required')
                      "
                    >
                      First name can't be left blank!
                    </mat-error>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('firstName')
                          ?.hasError('pattern') &&
                        !primaryContactForm
                          .get('firstName')
                          ?.hasError('required')
                      "
                    >
                      Use only letters
                    </mat-error>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('firstName')
                          ?.hasError('maxlength')
                      "
                    >
                      Max 60 characters allowed
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-sm-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Last Name</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="Deo"
                      formControlName="lastName"
                      maxlength="60"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerUser"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                    <mat-error
                      *ngIf="
                        primaryContactForm.get('lastName')?.hasError('required')
                      "
                    >
                      Last name can't be left blank!
                    </mat-error>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('lastName')
                          ?.hasError('pattern') &&
                        !primaryContactForm
                          .get('lastName')
                          ?.hasError('required')
                      "
                    >
                      Use only letters
                    </mat-error>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('lastName')
                          ?.hasError('maxlength')
                      "
                    >
                      Max 60 characters allowed
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Email</mat-label
                  >

                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="john@gmail.com"
                      type="email"
                      formControlName="email"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerMail"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                    <mat-error
                      *ngIf="
                        primaryContactForm.get('email')?.hasError('required')
                      "
                    >
                      Email is a must
                    </mat-error>
                    <mat-error
                      *ngIf="
                        primaryContactForm.get('email')?.hasError('pattern') &&
                        !primaryContactForm.get('email')?.hasError('required')
                      "
                    >
                      Please enter a valid email address
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col-sm-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Phone No</mat-label
                  >

                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="(123) 456-7890"
                      formControlName="phoneNumber"
                      mask="(000) 000-0000"
                      [dropSpecialCharacters]="false"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerPhone"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('phoneNumber')
                          ?.hasError('required')
                      "
                    >
                      Phone number is required to reach you!
                    </mat-error>
                    <mat-error
                      *ngIf="
                        primaryContactForm
                          .get('phoneNumber')
                          ?.hasError('pattern') &&
                        !primaryContactForm
                          .get('phoneNumber')
                          ?.hasError('required')
                      "
                    >
                      Phone number is not valid!
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
            </form>

            <div
              class="privacy-box d-flex align-items-start bg-white border rounded-4 shadow-sm p-3 mb-2"
            >
              <div
                class="privacy-icon d-flex align-items-center justify-content-center rounded-circle me-2"
              >
                <i class="bi bi-file-earmark-lock2-fill"></i>
              </div>
              <div>
                <div class="fw-semibold text-successcolor mb-2">
                  <strong>Your information is secure.</strong>
                </div>
                <small class="privacy-text fs-5 text-muted">
                  We only use these details for official filing purposes and
                  never share them with outside organizations.
                </small>
              </div>
            </div>
            <br />

            <div class="d-flex justify-content-between">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="primaryContactForm.invalid"
                (click)="savePrimaryContact(); goToNextStep(stepper)"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!--STEP 6:REGISTERED AGENT -->
          <mat-step label="REGISTERED AGENT">
            <h2 class="wizard-title">
              Appoint Your State-Required Registered Agent
            </h2>
            <p class="wizard-description">
              It's a state requirement to appoint a Registered Agent when you
              make your business official.<br />
              <strong>Don’t have one yet ?</strong>
              No worries — We can serve as your Registered Agent and handle
              everything for you, so you can focus on growing your business.
            </p>
            <form [formGroup]="registeredAgentForm">
              <div class="d-flex justify-content-left align-items-center space">
                <h3
                  class="fw-bold fs-1 lh-base wizard-subtitle"
                  style="margin-right: 18px"
                >
                  Appoint ClearInCrop
                </h3>
                <mat-slide-toggle
                  formControlName="useagentAddress"
                  (change)="toggleAgentAddress($event.checked)"
                  color="primary"
                ></mat-slide-toggle>
              </div>

              <div class="row space">
                <!-- First Name & Last Name -->
                <div class="col-lg-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >First Name</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="John"
                      formControlName="firstName"
                      id="firstNameInput"
                      (focus)="onFirstNameFocus($event)"
                      maxlength="60"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('firstName')
                          ?.hasError('required')
                      "
                    >
                      First name can't be left blank!</mat-error
                    >
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('firstName')
                          ?.hasError('maxlength')
                      "
                    >
                      Max 60 characters allowed </mat-error
                    ><mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('firstName')
                          ?.hasError('pattern') &&
                        !registeredAgentForm
                          .get('firstName')
                          ?.hasError('required')
                      "
                    >
                      Invalid First Name
                    </mat-error>
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerUser"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>

                <div class="col-lg-6">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Last Name</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="Doe"
                      formControlName="lastName"
                      id="lastNameInput"
                      (focus)="onFirstNameFocus($event)"
                      maxlength="60"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('lastName')
                          ?.hasError('required')
                      "
                    >
                      Last name can't be left blank!</mat-error
                    >
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('lastName')
                          ?.hasError('maxlength')
                      "
                    >
                      Max 60 characters allowed
                    </mat-error>
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('lastName')
                          ?.hasError('pattern') &&
                        !registeredAgentForm
                          .get('lastName')
                          ?.hasError('required')
                      "
                    >
                      Invalid Last Name
                    </mat-error>
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerUser"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
                <br />

                <!-- Address 1 & Address 2 -->
                <div class="col-lg-12">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Address Line 1</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="123 Main street"
                      formControlName="streetAddress1"
                      id="streetAddress1"
                      (focus)="onFirstNameFocus($event)"
                      maxlength="120"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('streetAddress1')
                          ?.hasError('required')
                      "
                      >Address can’t be empty!</mat-error
                    >
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('streetAddress1')
                          ?.hasError('pattern') &&
                        !registeredAgentForm
                          .get('streetAddress1')
                          ?.hasError('required')
                      "
                    >
                      Invalid Address</mat-error
                    >
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('streetAddress1')
                          ?.hasError('minlength')
                      "
                    >
                      Address must be at least 5 characters</mat-error
                    >
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerBuildingArch"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>

                <div class="col-lg-12">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Address Line 2</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="Apt 45"
                      formControlName="streetAddress2"
                      id="streetAddress2"
                      (focus)="onFirstNameFocus($event)"
                      maxlength="80"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('streetAddress2')
                          ?.hasError('required')
                      "
                      >Address can’t be empty!</mat-error
                    ><mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('streetAddress2')
                          ?.hasError('maxlength')
                      "
                    >
                      Max 80 characters allowed</mat-error
                    >
                    <mat-error
                      *ngIf="
                        registeredAgentForm
                          .get('streetAddress2')
                          ?.hasError('pattern') &&
                        !registeredAgentForm
                          .get('streetAddress2')
                          ?.hasError('required')
                      "
                    >
                      Invalid Address</mat-error
                    >
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerBuildingArch"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
                <br />

                <!-- City, State, zipCode -->
                <div class="col-lg-4">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >City</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="Jackson"
                      formControlName="city"
                      id="city"
                      (focus)="onFirstNameFocus($event)"
                      [errorStateMatcher]="errorStateMatcher"
                      maxlength="60"
                    />
                    <mat-error
                      *ngIf="
                        registeredAgentForm.get('city')?.hasError('required')
                      "
                      >City name required</mat-error
                    ><mat-error
                      *ngIf="
                        registeredAgentForm.get('city')?.hasError('pattern') &&
                        !registeredAgentForm.get('city')?.hasError('required')
                      "
                    >
                      Use only letters</mat-error
                    >
                    <mat-error
                      *ngIf="
                        registeredAgentForm.get('city')?.hasError('minlength')
                      "
                    >
                      City must be at least 5 characters
                    </mat-error>
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerBuildingSkyscraper"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
                <div class="col-lg-4">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >State</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      formControlName="state"
                      [readonly]="true"
                      placeholder="State"
                      id="State"
                      (focus)="onFirstNameFocus($event)"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerMapPin"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                    <mat-error
                      *ngIf="
                        registeredAgentForm.get('state')?.invalid &&
                        registeredAgentForm.get('state')?.touched
                      "
                    >
                      State is missing
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col-lg-4">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >ZipCode</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="45687"
                      formControlName="zipCode"
                      mask="00000"
                      id="zipCode"
                      (focus)="onFirstNameFocus($event)"
                      [dropSpecialCharacters]="false"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-error
                      *ngIf="
                        registeredAgentForm.get('zipCode')?.hasError('required')
                      "
                    >
                      ZipCode is required
                    </mat-error>
                    <!-- <mat-error *ngIf="registeredAgentForm.get('zipCode')?.hasError('pattern') && !registeredAgentForm.get('zipCode')?.hasError('required')"
                > Invalid ZipCode</mat-error
              > -->
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerMailbox"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
              </div>
            </form>
            <br />

            <div class="d-flex justify-content-between">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="registeredAgentForm.invalid"
                (click)="saveRegisteredAgent(); goToNextStep(stepper)"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- Step 7: Review screen-->
          <mat-step label="Review & Submit">
            <div class="container-fluid py-5 review-step">
              <!-- Main Heading -->
              <h2
                class="fw-bold display-5 heading text-center mb-4 wizard-title"
              >
                Ready to Launch ? Confirm Your LLC Details
              </h2>

              <!-- Intro Text -->
              <p class="text-muted justify-text mb-5 wizard-description">
                You're almost there! Below is a summary of the information
                you’ve entered for your LLC formation. Please review everything
                carefully to ensure it’s complete and accurate.
              </p>
              <div class="space">
                <!-- Business Details -->
                <h3 class="wizard-section-subtitle">Business Details</h3>
                <div class="row mb-3">
                  <div class="col-12 col-sm-6 col-md-6">
                    <div class="mb-1">
                      <span class="mat-label text-dark fw-semibold">State</span>
                    </div>
                    <div class="mat-input text-muted">
                      {{ stateFormGroup.get("stateCtrl")?.value }}
                    </div>
                  </div>

                  <div class="col-12 col-sm-6 col-md-6">
                    <div class="mb-1">
                      <span class="mat-label text-dark fw-semibold"
                        >Formation Date</span
                      >
                    </div>
                    <div class="mat-input text-muted">
                      {{
                        formationDateFormGroup.get("formationDate")?.value
                          | date
                      }}
                    </div>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-12 col-sm-6 col-md-6">
                    <div class="mb-1">
                      <span class="mat-label text-dark fw-semibold"
                        >Business Name</span
                      >
                    </div>
                    <div class="mat-input text-muted">
                      {{ businessFormGroup.get("companyName")?.value }}
                    </div>
                  </div>

                  <div class="col-12 col-md-6">
                    <div class="mb-1">
                      <span class="mat-label text-dark fw-semibold"
                        >Business Description</span
                      >
                    </div>
                    <div
                      class="mat-input fw-medium"
                      style="text-align: justify"
                    >
                      {{
                        businessDescriptionFormGroup.get("businessDescription")
                          ?.value
                      }}
                    </div>
                  </div>
                </div>

                <hr class="mb-4" />

                <!-- Primary Contact -->
                <h3 class="mb-3 wizard-section-subtitle">Primary Contact</h3>
                <div class="row mb-3">
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">First Name</span>
                    <span class="mat-input">
                      {{ primaryContactForm.get("firstName")?.value }}
                    </span>
                  </div>
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">Last Name</span>
                    <span class="mat-input">
                      {{ primaryContactForm.get("lastName")?.value }}
                    </span>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">Email</span>
                    <span class="mat-input">
                      {{ primaryContactForm.get("email")?.value }}
                    </span>
                  </div>
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">Phone Number</span>
                    <span class="mat-input">
                      {{ primaryContactForm.get("phoneNumber")?.value }}
                    </span>
                  </div>
                </div>

                <hr class="mb-4" />

                <!-- Registered Agent -->
                <h3 class="wizard-section-subtitle">Registered Agent</h3>
                <div class="row mb-3">
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">Address</span>
                    <span class="mat-input">
                      {{ registeredAgentForm.get("streetAddress1")?.value }}
                    </span>
                  </div>
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">City</span>
                    <span class="mat-input">
                      {{ registeredAgentForm.get("city")?.value }}
                    </span>
                  </div>
                </div>

                <div class="row mb-4">
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">State</span>
                    <span class="mat-input">
                      {{ registeredAgentForm.get("state")?.value }}
                    </span>
                  </div>
                  <div class="col-12 col-sm-6 col-md-6">
                    <span class="mat-label d-block mb-1">Zip Code</span>
                    <span class="mat-input">
                      {{ registeredAgentForm.get("zipCode")?.value }}
                    </span>
                  </div>
                </div>
              </div>
              <br />

              <!-- Review & Confirmation for regForm1 -->
              <div
                class="text-center wizard-description mt-5"
                *ngIf="!hideStepContent && !isPaymentDone"
              >
                <p class="justify-text mb-2">
                  To continue click the checkbox,read and understand the terms
                  and conditions.
                </p>

                <mat-checkbox
                  class="d-block my-3 text-secondary justify-text green-tick-checkbox"
                  [checked]="isAgreedRegForm1"
                  (change)="onTermsCheckboxClick($event, 'regForm1')"
                >
                  By clicking here, I state that I have read and understood the
                  terms and conditions.
                </mat-checkbox>
              </div>
              <br />

              <!-- Navigation Buttons -->
              <div
                class="actions d-flex justify-content-between"
                *ngIf="!hideStepContent && !isPaymentDone"
              >
                <button
                  mat-flat-button
                  class="button-prev"
                  (click)="goToPreviousStep(stepper)"
                  *ngIf="!hidePrevButton"
                >
                  Prev
                </button>
                <button
                  mat-flat-button
                  class="button-all"
                  (click)="submitLLCForm('regForm1')"
                  [disabled]="!isAgreedRegForm1"
                >
                  <span class="desktop-label">Proceed</span>
                  <span class="mobile-label">Done</span>
                </button>
              </div>

              <!-- General Support Message -->
              <div
                class="text-center mt-5 wizard-description"
                *ngIf="isPaymentDone"
              >
                <p class="text-secondary justify-text mb-3">
                  This form has been submitted in accordance with our terms. For
                  any modifications, ,<br />please contact our support team.,
                </p>
                <div class="d-flex justify-content-end">
                  <button
                    mat-flat-button
                    class="button-all"
                    (click)="goToNextStep(stepper)"
                  >
                    Next
                  </button>
                </div>
              </div>
            </div>
          </mat-step>

          <!--STEP 8:Ein -->
          <mat-step label="EIN">
            <h2 class="wizard-title">Power Up Your LLC</h2>
            <h3 class="wizard-subtitle">
              Secure Your EIN & Business Essentials
            </h3>
            <p class="wizard-description">
              Get your EIN (Tax ID) and other key documents bundled in one
              place. Save time, reduce paperwork, and start your business the
              right way — without the hassle!
            </p>
            <br />
            <div class="toggle-container">
              <form [formGroup]="einFormGroup">
                <mat-slide-toggle
                  [(ngModel)]="needEin"
                  formControlName="EIN"
                  [ngClass]="{ blue: needEin }"
                >
                  {{
                    needEin ? "Yes, file for EIN " : "No, I'll handle it myself"
                  }}
                </mat-slide-toggle>
              </form>
            </div>
            <br />

            <div class="d-flex justify-content-between mt-5">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                (click)="saveEinService(); goToNextStep(stepper)"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- STEP 9 : SECURE YOUR LLC WITH AN OPERATING AGREEMENT-->
          <mat-step label="OPERATING AGREEMENT">
            <h2 class="wizard-title">Secure Your LLC</h2>
            <h3 class="wizard-subtitle mb-1">Operating Agreement</h3>
            <p class="wizard-description">
              Ensure your LLC is legally sound with an agreement that defines
              ownership, management roles, and operational rules. <br />
              It’s a key document that supports liability protection and keeps
              your company compliant.
            </p>

            <div class="mb-2">
              <mat-list class="mt-1">
                <mat-list-item class="d-flex align-items-center fs-5 mb-2">
                  <div class="d-flex align-items-center flex-grow-1">
                    <mat-icon class="text-successcolor fs-4 me-2"
                      >gavel</mat-icon
                    >
                    <span class="ms-2"
                      >&nbsp;Establishes LLC ownership and
                      responsibilities</span
                    >
                  </div>
                </mat-list-item>

                <mat-list-item class="d-flex align-items-center fs-5 mb-2">
                  <div class="d-flex align-items-center flex-grow-1">
                    <mat-icon class="text-primarycolor fs-4 me-2"
                      >security</mat-icon
                    >
                    <span class="ms-2"
                      >&nbsp;Provides legal protection for members.</span
                    >
                  </div>
                </mat-list-item>

                <mat-list-item class="d-flex align-items-center fs-5">
                  <div class="d-flex align-items-center flex-grow-1">
                    <mat-icon class="text-warningcolor fs-4 me-2"
                      >edit</mat-icon
                    >
                    <span class="ms-2"
                      >&nbsp;Download, customize, and finalize in minutes</span
                    >
                  </div>
                </mat-list-item>
              </mat-list>
            </div>

            <!-- Toggle Switch for Agreement -->
            <div class="toggle-container my-2">
              <form [formGroup]="operatingAgreementFormGroup">
                <mat-slide-toggle
                  [(ngModel)]="includeAgreement"
                  formControlName="OA"
                  [ngClass]="{ blue: includeAgreement }"
                >
                  {{
                    includeAgreement
                      ? "Yes, create one for me "
                      : "No, I’ll handle it myself"
                  }}
                </mat-slide-toggle>
              </form>
            </div>
            <br />

            <div class="d-flex justify-content-between mt-5">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                (click)="saveOperatingAgreementService(); goToNextStep(stepper)"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- STEP 10 : EXPENDITED SERVICE-->
          <mat-step label="EXPENDITED SERVICE">
            <h2 class="wizard-title">Form Your LLC in 24 Hours</h2>
            <!-- Trusted Badge -->
            <h3 class="d-flex align-items-center mb-0 wizard-subtitle">
              Trusted by Thousands to Get It Done Right &nbsp;
              <!-- <span class="ms-3 text-warning fs-2">🌟</span> -->
            </h3>
            <p class="wizard-description">
              Starting your business shouldn’t be stressful or slow. With our
              fast, hassle-free LLC formation, you can register your company and
              be ready to launch in just one day!
            </p>

            <!-- Benefits List -->
            <mat-list class="mt-1 mb-0">
              <!-- Added mt-2 to slightly separate the list -->
              <mat-list-item
                class="d-flex justify-content-between align-items-center fs-5 mb-2"
              >
                <div class="d-flex align-items-center">
                  <mat-icon class="text-primarycolor fs-4 me-2">bolt</mat-icon>
                  <span>&nbsp;Speedy Processing</span>
                </div>
              </mat-list-item>

              <mat-list-item
                class="d-flex justify-content-between align-items-center fs-5 mb-2"
              >
                <div class="d-flex align-items-center">
                  <mat-icon class="text-successcolor fs-4 me-2"
                    >folder_copy</mat-icon
                  >
                  <span>&nbsp;Paperwork Handled</span>
                </div>
              </mat-list-item>

              <mat-list-item
                class="d-flex justify-content-between align-items-center fs-5 mb-2"
              >
                <div class="d-flex align-items-center">
                  <mat-icon class="text-infocolor fs-4 me-2"
                    >assignment</mat-icon
                  >
                  <span>&nbsp;Easy EIN setup.</span>
                </div>
              </mat-list-item>

              <mat-list-item
                class="d-flex justify-content-between align-items-center fs-5"
              >
                <div class="d-flex align-items-center">
                  <mat-icon class="text-errorcolor fs-4 me-2"
                    >verified</mat-icon
                  >
                  <span>&nbsp;Guaranteed Approval</span>
                </div>
              </mat-list-item>
            </mat-list>

            <!-- Toggle Switch for Agreement -->
            <div class="toggle-container my-2">
              <form [formGroup]="expeditedFormGroup">
                <mat-slide-toggle
                  [(ngModel)]="expeditedService"
                  formControlName="Expedit"
                  [ngClass]="{ blue: expeditedService }"
                  class="expedited-toggle"
                >
                  {{
                    expeditedService
                      ? "  Expedited service enabled"
                      : "  Smooth & Secure (3–5 Day Processing)"
                  }}
                </mat-slide-toggle>
              </form>
            </div>
            <br />

            <div class="d-flex justify-content-between mt-5">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="isSavingExpedited"
                (click)="handleExpediteNext()"
              >
                <ng-container *ngIf="!isSavingExpedited; else loadingTpl">
                  Next
                </ng-container>
                <ng-template #loadingTpl>
                  <mat-progress-spinner
                    diameter="20"
                    mode="indeterminate"
                    [strokeWidth]="3"
                    class="custom-spinner"
                  ></mat-progress-spinner>
                </ng-template>
              </button>
            </div>
          </mat-step>

          <!-- STEP 11 : PAYMENT STRUCTURE DETAILS-->
          <mat-step label="PAYMENT SUMMARY">
            <div class="payment-summary-container">
              <div>
                <div class="payment-header">
                  <h2 class="wizard-title">Payment Summary</h2>
                  <p class="wizard-description">
                    Review your LLC formation fees before moving forward
                  </p>
                </div>

                <div class="payment-items">
                  <!-- Required Fee -->
                  <div class="payment-item required">
                    <div class="item-icon">
                      <ng-icon
                        name="tablerCurrencyDollar"
                        class="icon-20"
                      ></ng-icon>
                    </div>
                    <div class="item-details">
                      <div class="item-name">
                        <span>State Filing Fee</span>
                        <!-- <span class="required-badge">Required</span> -->
                        <div
                          class="toggle bg-light-successcolor text-successcolor"
                        >
                          <ng-icon name="tablerCheck" class="icon-16"></ng-icon>
                        </div>
                      </div>
                      <p class="item-description">
                        Mandatory state registration fee for establishing your
                        LLC (one time)
                      </p>
                    </div>
                    <div class="item-amount">${{ stateFee }}</div>
                  </div>

                  <!-- Optional Fees -->
                  <div class="payment-item optional">
                    <div class="item-icon">
                      <ng-icon name="tablerFileText" class="icon-20"></ng-icon>
                    </div>
                    <div class="item-details">
                      <div class="item-name">
                        <span>EIN Processing</span>

                        <div class="toggle" [class.active]="needEin">
                          <ng-icon
                            [name]="needEin ? 'tablerCheck' : 'tablerX'"
                            class="icon-16"
                          ></ng-icon>
                        </div>
                      </div>
                      <p class="item-description">
                        Tax ID number required for business operations
                      </p>
                    </div>
                    <div class="item-amount" [class.disabled]="!needEin">
                      ${{ einFee }}
                    </div>
                  </div>

                  <div class="payment-item optional">
                    <div class="item-icon">
                      <ng-icon
                        name="tablerBuildingArch"
                        class="icon-20"
                      ></ng-icon>
                    </div>
                    <div class="item-details">
                      <div class="item-name">
                        <span>Registered Agent Service</span>
                        <div
                          class="toggle"
                          [class.active]="
                            registeredAgentForm.get('useagentAddress')?.value
                          "
                        >
                          <ng-icon
                            [name]="
                              registeredAgentForm.get('useagentAddress')?.value
                                ? 'tablerCheck'
                                : 'tablerX'
                            "
                            class="icon-16"
                          >
                          </ng-icon>
                        </div>
                      </div>
                      <p class="item-description">
                        Professional registered-agent service for your LLC
                      </p>
                    </div>
                    <div
                      class="item-amount"
                      [class.disabled]="
                        !registeredAgentForm.get('useagentAddress')?.value
                      "
                    >
                      ${{ registerAgentFee }}
                    </div>
                  </div>

                  <div class="payment-item optional">
                    <div class="item-icon">
                      <ng-icon name="tablerActivity" class="icon-20"></ng-icon>
                    </div>
                    <div class="item-details">
                      <div class="item-name">
                        <span>Operating Agreement</span>

                        <div class="toggle" [class.active]="includeAgreement">
                          <ng-icon
                            [name]="
                              includeAgreement ? 'tablerCheck' : 'tablerX'
                            "
                            class="icon-16"
                          ></ng-icon>
                        </div>
                      </div>
                      <p class="item-description">
                        Legal document defining LLC operations
                      </p>
                    </div>
                    <div
                      class="item-amount"
                      [class.disabled]="!includeAgreement"
                    >
                      ${{ agreementFee }}
                    </div>
                  </div>

                  <div class="payment-item optional">
                    <div class="item-icon">
                      <ng-icon
                        name="tablerCreditCard"
                        class="icon-20"
                      ></ng-icon>
                    </div>
                    <div class="item-details">
                      <div class="item-name">
                        <span>Expedited Service</span>

                        <div class="toggle" [class.active]="expeditedService">
                          <ng-icon
                            [name]="
                              expeditedService ? 'tablerCheck' : 'tablerX'
                            "
                            class="icon-16"
                          ></ng-icon>
                        </div>
                      </div>
                      <p class="item-description">
                        Process your LLC filing in just 24 hours
                      </p>
                    </div>
                    <div
                      class="item-amount"
                      [class.disabled]="!expeditedService"
                    >
                      ${{ expeditedFee }}
                    </div>
                  </div>
                </div>

                <div class="payment-divider"></div>

                <div class="payment-total">
                  <span>Total Amount</span>
                  <span class="total-amount">${{ totalCharges }} </span>
                </div>

                <!-- <div class="payment-notice">
                  <p>
                    All fees are non-refundable once the filing process has
                    begun
                  </p>
                </div> -->
                <br />

                <div class="payment-actions">
                  <button
                    mat-flat-button
                    class="button-prev"
                    style="border: 1px solid #313030"
                    (click)="goToPreviousStep(stepper)"
                  >
                    Prev
                  </button>
                  <button
                    mat-flat-button
                    class="button-all"
                    matStepperNext
                    (click)="initiatePayment()"
                  >
                    <span class="desktop-label">Make Payment</span>
                    <span class="mobile-label">Proceed</span>
                  </button>
                </div>
              </div>
            </div>
          </mat-step>

          <!-- STEP 12 : STRIPE UI-->
          <mat-step label="PAYMENT FORM">
            <div class="container p-4">
              <div class="row m-t-20">
                <div class="col-lg-6 d-flex justify-content-start">
                  <h2 class="wizard-title">Payment Gateway</h2>
                </div>
                <div class="col-lg-6 d-flex justify-content-end">
                  <img
                    src="/assets/cic-logo.jpg"
                    alt="CIC brand logo for LLC registration platform"
                    class="img-fluid shadow rounded-4 border elegant-hover-img"
                    style="max-width: 126px; width: 100%; height: auto"
                  />
                </div>
              </div>
              <br />
              <div id="payment-form-container"></div>

              <div *ngIf="paymentIntentId" class="payment-status mt-4">
                <div
                  class="status-icon"
                  [style.backgroundColor]="statusColor"
                ></div>
                <h2 class="status-text">{{ statusText }}</h2>
                <table>
                  <tr>
                    <td><strong>ID:</strong></td>
                    <td>{{ paymentIntentId }}</td>
                  </tr>
                  <tr>
                    <td><strong>Status:</strong></td>
                    <td>{{ paymentStatus }}</td>
                  </tr>
                </table>
                <a
                  *ngIf="stripeDashboardUrl"
                  [href]="stripeDashboardUrl"
                  target="_blank"
                  >View Details on Stripe</a
                >
              </div>
            </div>
            <br />
            <div class="d-flex justify-content-between mt-4">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                *ngIf="paymentInitiated"
                mat-flat-button
                color="accent"
                class="button-all"
                (click)="handlePayment()"
              >
                Pay ${{ totalCharges }}
              </button>
            </div>
          </mat-step>

          <!-- STEP 13 : SELECT MANAGEMENT CYCLE-->
          <mat-step label="SELECT MANAGEMENT CYCLE">
            <h2 class="wizard-title">
              How would you like your LLC to be managed?
            </h2>
            <!-- Increased font size here -->
            <p class="wizard-description mb-5">
              Select the right management setup for your business.
            </p>
            <br />
            <form [formGroup]="managementFormGroup">
              <div class="management-options">
                <!-- Member-Managed -->
                <div
                  class="management-card"
                  [class.selected]="
                    managementFormGroup.get('management')?.value === 'member'
                  "
                  (click)="selectManagement('member')"
                >
                  <img
                    src="assets/Member.jpg"
                    alt="Member profile for starting a new LLC online"
                  />
                  <div class="management-label">Member-Managed</div>
                  <mat-radio-button
                    class="hidden-radio"
                    formControlName="management"
                    value="member"
                  >
                  </mat-radio-button>
                </div>

                <!-- Manager-Managed -->
                <div
                  class="management-card"
                  [class.selected]="
                    managementFormGroup.get('management')?.value === 'manager'
                  "
                  (click)="selectManagement('manager')"
                >
                  <img
                    src="assets/Manager.jpg"
                    alt="LLC manager helping to set up an LLC"
                  />
                  <div class="management-label">Manager-Managed</div>
                  <mat-radio-button
                    class="hidden-radio"
                    formControlName="management"
                    value="manager"
                  >
                  </mat-radio-button>
                </div>
              </div>
            </form>
            <br />
            <br />

            <div class="d-flex justify-content-between mt-4">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="
                  !managementFormGroup.valid || choosingManagementStyle
                "
                (click)="saveManagementStyle(); deleteManagerService()"
              >
                <ng-container *ngIf="!choosingManagementStyle; else loadingTpl">
                  Next
                </ng-container>
                <ng-template #loadingTpl>
                  <mat-progress-spinner
                    diameter="20"
                    mode="indeterminate"
                    [strokeWidth]="3"
                    class="custom-spinner"
                  ></mat-progress-spinner>
                </ng-template>
              </button>
            </div>
          </mat-step>

          <!-- STEP 13B : Manager-MANAGED DETAILS -->
          <mat-step
            [stepControl]="managerForm"
            label="MANAGER-MANAGED DETAILS"
            *ngIf="getManagementStyleFromSessionStorage() === 'manager'"
          >
            <h2 class="wizard-title" style="margin-left: 26px">
              Great choice! Let’s add the manager(s) who will run your LLC.
            </h2>
            <p class="wizard-description" style="margin-left: 26px">
              In a Manager-Managed LLC, managers handle the operations. You can
              add multiple managers below if necessary.
            </p>

            <form [formGroup]="managerForm">
              <!-- Horizontal Stepper for Managers -->
              <mat-horizontal-stepper #managerStepper linear>
                <mat-step
                  *ngFor="let manager of managers.controls; let i = index"
                  [stepControl]="manager"
                  class="manager-card"
                  [class.removing]="manager.value._removing"
                  [class.adding]="manager.value._adding"
                >
                  <ng-template matStepLabel>Manager {{ i + 1 }}</ng-template>

                  <form [formGroup]="getManager(i)">
                    <h3 class="wizard-section-subtitle">Manager {{ i + 1 }}</h3>

                    <div class="row space">
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >First Name</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="John"
                            formControlName="firstName"
                            maxlength="60"
                            [errorStateMatcher]="errorStateMatcher"
                            id="managerFirstName_{{ i }}"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('firstName')
                                ?.hasError('required') &&
                              getManager(i).get('firstName')?.touched
                            "
                          >
                            First name can't be left blank!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('firstName')
                                ?.hasError('pattern') &&
                              !getManager(i)
                                .get('firstName')
                                ?.hasError('required')
                            "
                          >
                            Use only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('firstName')
                                ?.hasError('maxlength')
                            "
                          >
                            Max 60 characters allowed
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Last Name</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="Doe"
                            formControlName="lastName"
                            maxlength="60"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('lastName')
                                ?.hasError('required') &&
                              getManager(i).get('lastName')?.touched
                            "
                          >
                            Last name can't be left blank!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('lastName')
                                ?.hasError('pattern') &&
                              !getManager(i)
                                .get('lastName')
                                ?.hasError('required')
                            "
                          >
                            Use only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('lastName')
                                ?.hasError('maxlength')
                            "
                          >
                            Max 60 characters allowed
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Email</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="john@example.com"
                            formControlName="email"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('email')
                                ?.hasError('required') &&
                              getManager(i).get('email')?.touched
                            "
                          >
                            Email is a must
                          </mat-error>

                          <mat-error
                            *ngIf="
                              getManager(i).get('email')?.hasError('pattern') &&
                              !getManager(i).get('email')?.hasError('required')
                            "
                          >
                            Please enter a valid email address
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Phone No</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="(123) 456-7890"
                            formControlName="phoneNumber"
                            mask="(000) 000-0000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('phoneNumber')
                                ?.hasError('required') &&
                              getManager(i).get('phoneNumber')?.touched
                            "
                          >
                            Phone number is required to reach you!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('phoneNumber')
                                ?.hasError('pattern') &&
                              !getManager(i)
                                .get('phoneNumber')
                                ?.hasError('required')
                            "
                          >
                            Phone number is not valid!
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>

                    <!-- Slide Toggle for Address -->
                    <div
                      class="d-flex justify-content-between align-items-center mt-2"
                    >
                      <h3 class="wizard-section-subtitle mb-3">
                        Prefer to keep your address private ?
                      </h3>
                      <mat-slide-toggle
                        formControlName="useAddress_1"
                        color="primary"
                        (change)="toggleManagerAddress(i, $event.checked)"
                      >
                      </mat-slide-toggle>
                    </div>
                    <br />

                    <!-- ADDRESS DETAILS SECTION with formGroupName="managerAddress" -->
                    <div formGroupName="managerAddress" class="row mt-2">
                      <div class="col-sm-12">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Address Line 1</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="123 Main Street"
                            formControlName="streetAddress1"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="120"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('streetAddress1')
                                ?.hasError('required') &&
                              getManager(i).get('managerAddress.streetAddress1')
                                ?.touched
                            "
                          >
                            Address can’t be empty!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('streetAddress1')
                                ?.hasError('pattern') &&
                              !getManager(i)
                                .get('managerAddress')
                                ?.get('streetAddress1')
                                ?.hasError('required')
                            "
                          >
                            Invalid Address</mat-error
                          >
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('streetAddress1')
                                ?.hasError('minlength')
                            "
                          >
                            Address must be at least 5 characters</mat-error
                          >
                        </mat-form-field>
                      </div>
                      <div class="col-sm-12">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Address Line 2</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="Apartment, suite, etc."
                            formControlName="streetAddress2"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="80"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('streetAddress2')
                                ?.hasError('pattern') &&
                              !getManager(i)
                                .get('managerAddress')
                                ?.get('streetAddress2')
                                ?.hasError('required')
                            "
                          >
                            Invalid Address</mat-error
                          >
                        </mat-form-field>
                      </div>
                      <div class="col-sm-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >City</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="City"
                            formControlName="city"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="60"
                          />
                          <!-- Required error -->
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('city')
                                ?.hasError('required') &&
                              getManager(i).get('managerAddress.city')?.touched
                            "
                          >
                            City name required
                          </mat-error>

                          <!-- Pattern error -->
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('city')
                                ?.hasError('pattern') &&
                              getManager(i).get('managerAddress.city')?.invalid
                            "
                          >
                            Use Only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('city')
                                ?.hasError('minlength')
                            "
                          >
                            City must be at least 5 characters
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >State</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <mat-select
                            placeholder="State"
                            formControlName="state"
                            [errorStateMatcher]="errorStateMatcher"
                          >
                            <mat-option *ngFor="let st of states" [value]="st">
                              {{ st }}
                            </mat-option>
                          </mat-select>
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('state')
                                ?.hasError('required') &&
                              getManager(i).get('managerAddress.state')?.touched
                            "
                          >
                            State is missing
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >ZipCode</mat-label
                        >

                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="zipCode"
                            formControlName="zipCode"
                            mask="00000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getManager(i)
                                .get('managerAddress')
                                ?.get('zipCode')
                                ?.hasError('required') &&
                              getManager(i).get('managerAddress.zipCode')
                                ?.touched
                            "
                          >
                            ZipCode is required.
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>

                    <!-- Delete Button -->
                    <div class="d-flex justify-content-end mt-3">
                      <button
                        mat-mini-fab
                        (click)="removeManager(i)"
                        class="delete-button"
                      >
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>

                    <!-- In-Step Navigation Buttons -->
                    <div class="d-flex justify-content-between mt-3">
                      <button mat-icon-button matStepperPrevious *ngIf="i > 0">
                        <mat-icon>arrow_back</mat-icon>
                      </button>
                      <button
                        mat-icon-button
                        matStepperNext
                        *ngIf="i < managers.length - 1"
                      >
                        <mat-icon>arrow_forward</mat-icon>
                      </button>
                    </div>
                  </form>
                </mat-step>
              </mat-horizontal-stepper>

              <!-- Add Manager Button -->
              <div
                class="mt-2 d-flex justify-content-center"
                *ngIf="areAllManagersValid()"
              >
                <button
                  mat-raised-button
                  class="button-allset"
                  (click)="addManager()"
                >
                  Add Another Manager
                </button>
              </div>
            </form>

            <br />
            <!-- Overall Navigation Buttons -->
            <div class="d-flex justify-content-between mt-3">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="!isManagerFormValid()"
                (click)="saveManagerData(); goToNextStep(stepper)"
                appAutoFocusNext="memberFirstName_0"
              >
                Next
              </button>
            </div>
          </mat-step>
          <!-- STEP: MEMBER-MANAGED DETAILS -->
          <mat-step [stepControl]="memberForm" label="MEMBER-MANAGED DETAILS">
            <div *ngIf="getManagementStyleFromSessionStorage() === 'manager'">
              <h2 class="wizard-title" style="margin-left: 26px">
                Time for Member Details
              </h2>
              <p class="wizard-description" style="margin-left: 26px">
                All set with your manager! Let's shift focus to the members
                contributing to your business. We'll need the name, contact
                details, and ownership share for each member.
              </p>
            </div>
            <div *ngIf="getManagementStyleFromSessionStorage() === 'member'">
              <h2 class="wizard-title" style="margin-left: 26px">
                You're in Charge! Member-Managed
              </h2>
              <p class="wizard-description" style="margin-left: 26px">
                Great choice — This means all owners will help operate the
                business. We'll need the name, contact details, and ownership
                share for each member.
              </p>
            </div>

            <form [formGroup]="memberForm">
              <!-- Horizontal Stepper for Members -->
              <mat-horizontal-stepper #memberStepper linear>
                <mat-step
                  *ngFor="let member of members.controls; let i = index"
                  [stepControl]="member"
                  class="member-card"
                  [class.removing]="member.value._removing"
                  [class.adding]="member.value._adding"
                >
                  <ng-template matStepLabel>Member {{ i + 1 }}</ng-template>

                  <!-- Member Form using the helper method getMember(i) -->
                  <form [formGroup]="getMember(i)">
                    <!-- PERSONAL INFORMATION SECTION -->
                    <!-- Show checkbox when no one is selected or when all checkboxes should be visible -->
                    <div
                      class="step-label-row"
                      style="
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 100%;
                      "
                    >
                      <h3 class="wizard-section-subtitle">
                        Member {{ i + 1 }}
                      </h3>
                      <mat-checkbox
                        class="d-block my-3 text-secondary justify-text green-tick-checkbox"
                        *ngIf="needEin"
                        [checked]="isEinResponsibleParty(i)"
                        (change)="
                          onEinResponsiblePartyChange(i, $event.checked)
                        "
                      >
                        EIN Responsible Party
                      </mat-checkbox>
                    </div>

                    <div class="row space">
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >First Name</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="John"
                            formControlName="firstName"
                            maxlength="60"
                            [errorStateMatcher]="errorStateMatcher"
                            id="memberFirstName_{{ i }}"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('firstName')
                                ?.hasError('required') &&
                              getMember(i).get('firstName')?.touched
                            "
                          >
                            First name can't be left blank!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('firstName')
                                ?.hasError('pattern') &&
                              !getMember(i)
                                .get('firstName')
                                ?.hasError('required')
                            "
                          >
                            Use only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('firstName')
                                ?.hasError('maxlength')
                            "
                          >
                            Max 60 characters allowed
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Last Name</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="Doe"
                            formControlName="lastName"
                            maxlength="60"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('lastName')
                                ?.hasError('required') &&
                              getMember(i).get('lastName')?.touched
                            "
                          >
                            Last name can't be left blank!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('lastName')
                                ?.hasError('pattern') &&
                              !getMember(i)
                                .get('lastName')
                                ?.hasError('required')
                            "
                          >
                            Use only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('lastName')
                                ?.hasError('maxlength')
                            "
                          >
                            Max 60 characters allowed
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Email</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="john@example.com"
                            formControlName="email"
                            [errorStateMatcher]="errorStateMatcher"
                          />

                          <mat-error
                            *ngIf="
                              getMember(i).get('email')?.hasError('required') &&
                              getMember(i).get('email')?.touched
                            "
                          >
                            Email is a must
                          </mat-error>

                          <mat-error
                            *ngIf="
                              getMember(i).get('email')?.hasError('pattern') &&
                              !getMember(i).get('email')?.hasError('required')
                            "
                          >
                            Please enter a valid email address
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Phone No</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="(123) 456-7890"
                            formControlName="phoneNumber"
                            mask="(000) 000-0000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('phoneNumber')
                                ?.hasError('required') &&
                              getMember(i).get('phoneNumber')?.touched
                            "
                          >
                            Phone number is required to reach you!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('phoneNumber')
                                ?.hasError('pattern') &&
                              !getMember(i)
                                .get('phoneNumber')
                                ?.hasError('required')
                            "
                          >
                            Phone number is not valid!
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <!-- Ownership field -->
                      <div class="col-lg-6">
                        <mat-label
                          class="mat-subtitle-2 f-w-600 d-block m-b-12"
                        >
                          Ownership (%)
                        </mat-label>
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            type="number"
                            formControlName="ownership"
                            (input)="calculateTotalOwnership()"
                            placeholder="Enter ownership %"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('ownership')
                                ?.hasError('required') &&
                              getMember(i).get('ownership')?.touched
                            "
                          >
                            Ownership is important!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i).get('ownership')?.hasError('min') ||
                              getMember(i).get('ownership')?.hasError('max')
                            "
                          >
                            Please choose a number between 1 and 100.
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <!-- SSN/ITIN/EIN field: only shows when that member is selected -->
                      <!-- <div
                        class="col-lg-6"
                        *ngIf="needEin && shouldShowEinTaxIdInput(i)"
                      >
                        <mat-label
                          class="mat-subtitle-2 f-w-600 d-block m-b-12"
                        >
                          SSN/ITIN/EIN
                        </mat-label>
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="XXX-XX-XXXX"
                            formControlName="einTaxId"
                            mask="000-00-0000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('einTaxId')
                                ?.hasError('required') &&
                              getMember(i).get('einTaxId')?.touched
                            "
                          >
                            Tax ID is required for EIN responsible party
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('einTaxId')
                                ?.hasError('pattern') &&
                              !getMember(i)
                                .get('einTaxId')
                                ?.hasError('required')
                            "
                          >
                            Please enter a valid SSN (XXX-XX-XXXX)
                          </mat-error>
                        </mat-form-field>
                                                <!-- <button
                              mat-button
                              type="button"
                              class="change-responsible-party-btn"
                              (click)="clearEinResponsibleParty()"
                            >
                              Change Responsible Party
                            </button> -->
                    </div>

                    <!-- Slide Toggle for Address -->
                    <div
                      class="d-flex justify-content-between align-items-center mt-2"
                    >
                      <h3 class="wizard-section-subtitle mb-3">
                        Prefer to keep your address private ?
                      </h3>
                      <mat-slide-toggle
                        formControlName="useAddress"
                        color="primary"
                        (change)="toggleMemberAddress(i, $event.checked)"
                      ></mat-slide-toggle>
                    </div>
                    <br />

                    <!-- ADDRESS DETAILS SECTION (No horizontal rule) -->
                    <div formGroupName="address" class="row mt-2">
                      <div class="col-sm-12">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Address Line 1</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="123 Main Street"
                            formControlName="streetAddress1"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="120"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address')
                                ?.get('streetAddress1')
                                ?.hasError('required') &&
                              getMember(i).get('address.streetAddress1')
                                ?.touched
                            "
                          >
                            Address can't be empty!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address')
                                ?.get('streetAddress1')
                                ?.hasError('pattern') &&
                              !getMember(i)
                                .get('address')
                                ?.get('streetAddress1')
                                ?.hasError('required')
                            "
                          >
                            Invalid Address</mat-error
                          >
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address')
                                ?.get('streetAddress1')
                                ?.hasError('minlength')
                            "
                          >
                            Address must be at least 5 characters</mat-error
                          >
                        </mat-form-field>
                      </div>

                      <div class="col-sm-12">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >Address Line 2</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="Apartment, suite, etc."
                            formControlName="streetAddress2"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="80"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-6">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >City</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="City"
                            formControlName="city"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="60"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address.city')
                                ?.hasError('required') &&
                              getMember(i).get('address.city')?.touched
                            "
                          >
                            City name required.
                          </mat-error>

                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address.city')
                                ?.hasError('pattern') &&
                              getMember(i).get('address.city')?.dirty &&
                              getMember(i).get('address.city')?.invalid
                            "
                          >
                            Use Only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address.city')
                                ?.hasError('minlength')
                            "
                          >
                            City must be at least 5 characters
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >State</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-select
                            placeholder="State"
                            formControlName="state"
                            [errorStateMatcher]="errorStateMatcher"
                          >
                            <mat-option *ngFor="let st of states" [value]="st">
                              {{ st }}
                            </mat-option>
                          </mat-select>
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address')
                                ?.get('state')
                                ?.hasError('required') &&
                              getMember(i).get('address.state')?.touched
                            "
                          >
                            State is missing.
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                          >ZipCode</mat-label
                        >
                        <mat-form-field appearance="outline" class="w-100">
                          <input
                            matInput
                            placeholder="ZipCode"
                            formControlName="zipCode"
                            mask="00000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              getMember(i)
                                .get('address')
                                ?.get('zipCode')
                                ?.hasError('required') &&
                              getMember(i).get('address.zipCode')?.touched
                            "
                          >
                            ZipCode is required.
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>

                    <!-- Delete Member Button -->
                    <div class="d-flex justify-content-end mt-3">
                      <!-- <button mat-mini-fab color="warn" (click)="removeMember(i)">
                        <mat-icon>delete</mat-icon>
                      </button> -->
                      <button
                        mat-mini-fab
                        (click)="removeMember(i)"
                        class="delete-button"
                      >
                        <mat-icon class="delete-icon">delete</mat-icon>
                      </button>
                    </div>

                    <!-- In-Step Navigation Buttons -->
                    <div class="d-flex justify-content-between mt-3">
                      <button mat-icon-button matStepperPrevious *ngIf="i > 0">
                        <mat-icon>arrow_back</mat-icon>
                      </button>
                      <button
                        mat-icon-button
                        matStepperNext
                        *ngIf="i < members.length - 1"
                      >
                        <mat-icon>arrow_forward</mat-icon>
                      </button>
                    </div>
                  </form>
                </mat-step>
              </mat-horizontal-stepper>

              <!-- Add Member Button (Shown only when totalOwnership < 100) -->
              <div
                class="mt-2 d-flex justify-content-center"
                *ngIf="totalOwnership < 100 && areAllMembersValid()"
              >
                <button
                  mat-raised-button
                  class="button-allset"
                  (click)="addMember()"
                >
                  Add Another Member
                </button>
              </div>
              <br />

              <!-- Total Ownership Validation Display -->
              <div
                *ngIf="totalOwnership !== 100"
                class="text-danger mt-2 text-center"
              >
                Total Ownership must be 100% , Current: {{ totalOwnership }}%
              </div>

              <div
                *ngIf="totalOwnership === 100"
                class="text-success mt-2 text-center"
              >
                Total ownership is complete: {{ totalOwnership }}%
              </div>

              <!-- EIN Responsible Party Validation -->
              <div
                *ngIf="needEin && selectedEinResponsiblePartyIndex === null"
                class="text-warning mt-2 text-center"
              >
                Please select one member as the EIN responsible party
              </div>
            </form>
            <br />

            <!-- Overall Navigation Buttons -->
            <div class="d-flex justify-content-between mt-3">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="!isMemberFormValid()"
                (click)="saveMemberData(); goToNextStep(stepper)"
                appAutoFocusNext="streeAddressInput"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- STEP 14 : ADDRESS SELECTION-->
          <mat-step label="ADDRESS SELECTION">
            <h2 class="wizard-title">Where will your business operate from?</h2>
            <p class="wizard-description">
              This is the address we’ll use to send official documents and legal
              notices, so accuracy is important. A valid business address is
              required for state filings, legal compliance, and tax purposes.
            </p>

            <form [formGroup]="addressForm">
              <div
                class="d-flex justify-content-between align-items-center space"
              >
                <h3 class="wizard-section-subtitle mb-3">
                  Use our address as your official business address ?
                </h3>
                <mat-slide-toggle
                  formControlName="useOurAddress"
                  color="primary"
                  (change)="toggleAddress($event.checked)"
                ></mat-slide-toggle>
              </div>
              <div class="row space">
                <div class="col-sm-12 d-flex align-items-center">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Address Line 1</mat-label
                  >
                </div>
                <br />
                <div class="col-sm-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="123 Main street"
                      formControlName="streetAddress1"
                      required
                      [errorStateMatcher]="errorStateMatcher"
                      maxlength="120"
                      id="streeAddressInput"
                    />
                    <mat-error
                      *ngIf="
                        addressForm.get('streetAddress1')!.hasError('required')
                      "
                      >Address can’t be empty!</mat-error
                    >
                    <mat-error
                      *ngIf="
                        addressForm
                          .get('streetAddress1')
                          ?.hasError('pattern') &&
                        !addressForm.get('streetAddress1')?.hasError('required')
                      "
                    >
                      Invalid Address</mat-error
                    >
                    <mat-error
                      *ngIf="
                        addressForm.get('streetAddress1')?.hasError('minlength')
                      "
                    >
                      Address must be at least 5 characters</mat-error
                    >
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerBuildingArch"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-12 d-flex align-items-center">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >Address Line 2</mat-label
                  >
                </div>
                <div class="col-sm-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="123 Main street"
                      formControlName="streetAddress2"
                      [errorStateMatcher]="errorStateMatcher"
                      maxlength="80"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerBuildingArch"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >City</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="Jackson"
                      formControlName="city"
                      [errorStateMatcher]="errorStateMatcher"
                      maxlength="60"
                    />
                    <mat-error
                      *ngIf="addressForm.get('city')?.hasError('required')"
                    >
                      City name required
                    </mat-error>

                    <mat-error
                      *ngIf="
                        addressForm.get('city')?.hasError('pattern') &&
                        addressForm.get('city')?.invalid
                      "
                    >
                      Use Only letters
                    </mat-error>
                    <mat-error
                      *ngIf="addressForm.get('city')?.hasError('minlength')"
                    >
                      City must be at least 5 characters
                    </mat-error>

                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerBuildingSkyscraper"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>

                <div class="col-md-4">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >State</mat-label
                  >
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      formControlName="state"
                      [readonly]="true"
                      placeholder="State"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerMapPin"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                    <mat-error
                      *ngIf="addressForm.get('state')!.hasError('required')"
                    >
                      State is missing
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col-md-4">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-12"
                    >ZipCode
                  </mat-label>
                  <mat-form-field appearance="outline" class="w-100">
                    <input
                      matInput
                      placeholder="45687"
                      formControlName="zipCode"
                      mask="00000"
                      [dropSpecialCharacters]="false"
                      [errorStateMatcher]="errorStateMatcher"
                    />
                    <mat-error
                      *ngIf="addressForm.get('zipCode')!.hasError('required')"
                    >
                      ZipCode is required.</mat-error
                    >
                    <mat-error
                      *ngIf="addressForm.get('zipCode')!.hasError('pattern')"
                      >Invalid ZipCode format</mat-error
                    >
                    <mat-icon matPrefix class="op-5">
                      <ng-icon
                        name="tablerMailbox"
                        class="icon-20 d-flex"
                      ></ng-icon>
                    </mat-icon>
                  </mat-form-field>
                </div>
              </div>
            </form>

            <br />
            <div class="d-flex justify-content-between">
              <button
                mat-flat-button
                class="button-prev"
                (click)="goToPreviousStep(stepper)"
              >
                Prev
              </button>
              <button
                mat-flat-button
                class="button-all"
                [disabled]="addressForm.invalid"
                (click)="saveMailingAttributes(); goToNextStep(stepper)"
              >
                Next
              </button>
            </div>
          </mat-step>

          <!-- STEP 15: Review Management Cycle -->
          <mat-step label="Review Management Cycle">
            <div class="container-fluid py-5 review-step2">
              <h2
                class="fw-bold display-5 text-center heading mb-4 wizard-title"
              >
                Review & Confirm Your Management Structure
              </h2>
              <!-- Intro Text -->
              <p class="text-muted justify-text mb-5 wizard-description">
                You’ve selected the following <b>Management Style</b> for your
                LLC. Please take a moment to review your choice. If anything
                needs to be updated, you can go back and make changes before
                submission.
              </p>

              <!-- Management Style -->
              <h3
                class="text-uppercase m-t-12 text-center wizard-section-title"
              >
                Management Style :
                <span class="text-successcolor fw-bold">
                  {{
                    managementFormGroup.get("management")?.value === "member"
                      ? "Member-Managed"
                      : "Manager-Managed"
                  }}
                </span>
              </h3>
              <br />

              <!-- Manager-Managed Section -->
              <ng-container
                *ngIf="
                  managementFormGroup.get('management')?.value === 'manager'
                "
              >
                <h3 class="mb-3 wizard-section-subtitle">Managers</h3>
                <div class="scroll-container mb-4">
                  <div
                    *ngFor="let manager of managers.controls; let i = index"
                    class="data-box p-3"
                  >
                    <div class="space-below">
                      <span
                        class="mat-label d-block mb-3 fs-7 text-successcolor space-below"
                      >
                        Manager {{ i + 1 }}
                      </span>
                    </div>
                    <div class="row">
                      <div class="col-md-6 space-below">
                        <span class="mat-label d-block">First Name</span>
                        <span class="mat-input">{{
                          manager.get("firstName")?.value
                        }}</span>
                      </div>
                      <div class="col-md-6 space-below">
                        <span class="mat-label d-block">Last Name</span>
                        <span class="mat-input">{{
                          manager.get("lastName")?.value
                        }}</span>
                      </div>
                    </div>
                    <div class="row mt-3">
                      <div class="col-md-6 space-below">
                        <span class="mat-label d-block">Email</span>
                        <span class="mat-input">{{
                          manager.get("email")?.value
                        }}</span>
                      </div>
                      <div class="col-md-6 space-below">
                        <span class="mat-label d-block">Phone Number</span>
                        <span class="mat-input">{{
                          manager.get("phoneNumber")?.value
                        }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>

              <!-- Ownership Members Section -->
              <h3 class="mb-3 wizard-section-subtitle">Ownership Members</h3>
              <div class="scroll-container-member mb-4">
                <div
                  *ngFor="let member of members.controls; let i = index"
                  class="data-box p-3"
                >
                  <div class="space-below">
                    <span
                      class="mat-label d-block mb-3 fs-7 text-successcolor space-below"
                    >
                      Member {{ i + 1 }}
                    </span>
                  </div>
                  <div class="row">
                    <div class="col-md-6 space-below">
                      <span class="mat-label d-block">First Name</span>
                      <span class="mat-input">{{
                        member.get("firstName")?.value
                      }}</span>
                    </div>
                    <div class="col-md-6 space-below">
                      <span class="mat-label d-block">Last Name</span>
                      <span class="mat-input">{{
                        member.get("lastName")?.value
                      }}</span>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-6 space-below">
                      <span class="mat-label d-block">Email</span>
                      <span class="mat-input">{{
                        member.get("email")?.value
                      }}</span>
                    </div>
                    <div class="col-md-6 space-below">
                      <span class="mat-label d-block">Phone Number</span>
                      <span class="mat-input">{{
                        member.get("phoneNumber")?.value
                      }}</span>
                    </div>
                  </div>
                  <div class="row mt-3 space-below">
                    <div class="col-md-6 space-below">
                      <span class="mat-label d-block"
                        >Ownership Percentage</span
                      >
                      <span class="mat-input"
                        >{{ member.get("ownership")?.value }}%</span
                      >
                    </div>
                    <!-- EIN field (optional) -->
                    <!--
      <div class="col-md-6 space-below" *ngIf="needEin && shouldShowEinTaxIdInput(i)">
        <span class="mat-label d-block">SSN/ITIN/EIN</span>
        <span class="mat-input">{{ member.get("einTaxId")?.value }}</span>
      </div>
      -->
                  </div>
                </div>
              </div>

              <!-- Business Address -->
              <h3 class="mb-3 wizard-section-subtitle">Business Address</h3>
              <div class="row mb-3">
                <div class="col-md-6 space-below">
                  <span class="mat-label d-block">Address Line 1</span>
                  <span class="mat-input">{{
                    addressForm.get("streetAddress1")?.value
                  }}</span>
                </div>
                <div class="col-md-6 space-below">
                  <span class="mat-label d-block">City</span>
                  <span class="mat-input">{{
                    addressForm.get("city")?.value
                  }}</span>
                </div>
              </div>
              <div class="row mb-3 space-below">
                <div class="col-md-6 space-below">
                  <span class="mat-label d-block">State</span>
                  <span class="mat-input">{{
                    addressForm.get("state")?.value
                  }}</span>
                </div>
                <div class="col-md-6 space-below">
                  <span class="mat-label d-block">Zip Code</span>
                  <span class="mat-input">{{
                    addressForm.get("zipCode")?.value
                  }}</span>
                </div>
              </div>

              <br />
              <!-- Agreement & Confirmation  regForm3-->
              <div
                class="text-center wizard-description mb-4"
                *ngIf="!launchedLLC"
              >
                <p class="justify-text mb-2">
                  To continue click the checkbox,read and understand the terms
                  and conditions.
                </p>

                <mat-checkbox
                  class="d-block my-3 justify-text green-tick-checkbox"
                  [checked]="isAgreedRegForm3"
                  (change)="onTermsCheckboxClick($event, 'regForm3')"
                >
                  I accept the terms and conditions of the LLC formation
                  process.
                </mat-checkbox>
              </div>
              <br />
              <!-- Navigation pays -->
              <div
                class="actions d-flex justify-content-between mt-4"
                *ngIf="!launchedLLC"
              >
                <button
                  mat-flat-button
                  class="button-prev"
                  (click)="goToPreviousStep(stepper)"
                >
                  Prev
                </button>
                <button
                  mat-flat-button
                  class="button-all"
                  [disabled]="!isAgreedRegForm3"
                  (click)="submitLLCForm('regForm3')"
                >
                  <span class="desktop-label">Launch My LLC</span>
                  <span class="mobile-label">Done</span>
                </button>
              </div>
              <div
                class="text-center mt-5 wizard-description"
                *ngIf="launchedLLC"
              >
                <p class="justify-text mb-3">
                  This form has been submitted in accordance with our terms. For
                  any modifications, ,<br />please contact our support team.,
                </p>
                <div class="d-flex justify-content-end">
                  <button
                    mat-flat-button
                    class="button-all"
                    (click)="goToNextStep(stepper)"
                  >
                    Next
                  </button>
                </div>
              </div>
            </div>
          </mat-step>
          <!-- NEW STEP: EIN Application Form (after step 15) -->
          <mat-step
            label="EIN APPLICATION FORM"
            *ngIf="
              (stepper.selectedIndex === 16 || stepper.selectedIndex === 17) &&
              getNeedEin()
            "
            ><div class="ein-application-container">
              <h2 class="form-main-title">EIN Application Form</h2>
              <p class="form-description">
                Complete your EIN application by providing the remaining
                details. Key information from your LLC formation is already
                pre-filled—simply review and complete!
              </p>

              <div
                class="form-content-wrapper"
                [formGroup]="einApplicationForm"
              >
                <div class="reference-panel">
                  <h3 class="panel-title">Reference Information</h3>

                  <div class="reference-section">
                    <h4 class="section-heading">LLC Information</h4>
                    <div class="reference-item">
                      <label class="reference-label">LLC Name</label>
                      <p class="reference-value">
                        {{ einApplicationForm.get("llcName")?.value }}
                      </p>
                    </div>
                    <div class="reference-item">
                      <label class="reference-label">Number of Members</label>
                      <p class="reference-value">
                        {{ einApplicationForm.get("numberOfMembers")?.value }}
                      </p>
                    </div>
                    <div class="reference-item">
                      <label class="reference-label">Trade Name (DBA)</label>
                      <p class="reference-value">
                        {{ einApplicationForm.get("tradeName")?.value }}
                      </p>
                    </div>
                  </div>

                  <div class="reference-section">
                    <h4 class="section-heading">Responsible Party</h4>
                    <div class="reference-item">
                      <label class="reference-label"
                        >Responsible Party Name</label
                      >
                      <p class="reference-value">
                        {{
                          einApplicationForm.get("responsiblePartyName")?.value
                        }}
                      </p>
                    </div>
                  </div>

                  <div class="reference-section">
                    <h4 class="section-heading">Business Profile</h4>
                    <div class="reference-item">
                      <label class="reference-label">Primary Activity</label>
                      <p class="reference-value">
                        {{ einApplicationForm.get("primaryActivity")?.value }}
                      </p>
                    </div>
                    <div class="reference-item">
                      <label class="reference-label">Formation Date</label>
                      <p class="reference-value">
                        {{ einApplicationForm.get("formationDate")?.value }}
                      </p>
                    </div>
                  </div>

                  <div class="reference-section">
                    <h4 class="section-heading">Business Address</h4>
                    <div class="reference-item">
                      <p class="reference-value">
                        {{
                          einApplicationForm.get("businessStreetAddress")?.value
                        }}
                      </p>
                      <p class="reference-value">
                        {{ einApplicationForm.get("businessCity")?.value }},
                        {{ einApplicationForm.get("businessState")?.value }}
                        {{ einApplicationForm.get("businessZipCode")?.value }}
                      </p>
                    </div>
                  </div>
                </div>

                <div class="editable-panel">
                  <div class="editable-section">
                    <h3 class="panel-title">Identity Verification</h3>
                    <div class="form-row">
                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label>SSN/ITIN *</mat-label>
                        <input
                          matInput
                          placeholder="XXX-XX-XXXX"
                          formControlName="ssnItin"
                          mask="000-00-0000"
                          [dropSpecialCharacters]="false"
                          [errorStateMatcher]="errorStateMatcher"
                          id="ssnItinInput"
                        />
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('ssnItin')
                              ?.hasError('required')
                          "
                        >
                          SSN/ITIN is required
                        </mat-error>
                        <mat-error
                          *ngIf="
                            einApplicationForm.hasError('ssnMismatch') &&
                            einApplicationForm.get('verifySsnItin')?.touched
                          "
                        >
                          SSN/ITIN values do not match
                        </mat-error>
                      </mat-form-field>

                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label>Verify SSN/ITIN *</mat-label>
                        <input
                          matInput
                          placeholder="XXX-XX-XXXX"
                          formControlName="verifySsnItin"
                          mask="000-00-0000"
                          [dropSpecialCharacters]="false"
                          [errorStateMatcher]="errorStateMatcher"
                        />
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('verifySsnItin')
                              ?.hasError('required')
                          "
                        >
                          Please verify your SSN/ITIN
                        </mat-error>
                        <mat-error
                          *ngIf="einApplicationForm.hasError('ssnMismatch')"
                        >
                          SSN/ITIN values do not match
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="editable-section">
                    <h3 class="panel-title">Business Details</h3>
                    <div class="form-row">
                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label
                          >Tell Us More About Your
                          {{ einApplicationForm.get("primaryActivity")?.value }}
                          Activity *</mat-label
                        >
                        <mat-select
                          formControlName="principalSubActivity"
                          placeholder="-- Select principal sub-activity --"
                          [errorStateMatcher]="errorStateMatcher"
                        >
                          <mat-option
                            *ngFor="let sc of subcategoryValue"
                            [value]="sc"
                          >
                            {{ sc }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('principalSubActivity')
                              ?.hasError('required')
                          "
                        >
                          Please select a sub-activity.
                        </mat-error>
                      </mat-form-field>

                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label>Reason for Applying *</mat-label>
                        <mat-select formControlName="reasonForApplying">
                          <mat-option
                            *ngFor="let reason of reasonForApplying"
                            [value]="reason.id"
                          >
                            {{ reason.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>

                    <div class="form-row">
                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label
                          >Closing Month of Accounting Year *</mat-label
                        >
                        <mat-select formControlName="closingMonth" required>
                          <mat-option value="" disabled
                            >Select a month</mat-option
                          >
                          <mat-option
                            *ngFor="let month of months"
                            [value]="month"
                          >
                            {{ month }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('closingMonth')
                              ?.hasError('required')
                          "
                        >
                          Closing month is required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div
                      *ngIf="
                        einApplicationForm.get('numberOfMembers')?.value == 2
                      "
                      class="form-checkbox-group"
                    >
                      <mat-checkbox
                        formControlName="husbandWifeMembers"
                        class="sm-label"
                      >
                        The two members are husband and wife
                      </mat-checkbox>
                      <p
                        *ngIf="
                          einApplicationForm.get('husbandWifeMembers')?.value
                        "
                        class="description conditional-description"
                      >
                        (Please choose how you want to classify your LLC for
                        federal tax purposes)
                      </p>
                      <div
                        *ngIf="
                          einApplicationForm.get('husbandWifeMembers')?.value
                        "
                        class="radio-group-indent"
                      >
                        <mat-radio-group formControlName="LLCType">
                          <mat-radio-button value="Multi-member LLC">
                            Multi-member LLC
                          </mat-radio-button>
                          <mat-radio-button value="Single-member LLC">
                            Single-member LLC
                          </mat-radio-button>
                        </mat-radio-group>
                      </div>
                    </div>
                  </div>
                  <div class="editable-section">
                    <h4 class="panel-title">Required Information</h4>
                    <div class="form-checkbox-group">
                      <mat-checkbox
                        formControlName="ownsHeavyVehicle"
                        class="sm-label"
                      >
                        Does the business own a highway motor vehicle weighing
                        55,000 pounds or more?
                      </mat-checkbox>
                      <mat-checkbox
                        formControlName="involvesGambling"
                        class="sm-label"
                      >
                        Does the business involve gambling? </mat-checkbox
                      ><br />
                      <mat-checkbox
                        formControlName="sellsAlcoholTobaccoFirearms"
                        class="sm-label"
                      >
                        Does the business sell or manufacture alcohol, tobacco,
                        or firearms?
                      </mat-checkbox>
                      <mat-checkbox
                        formControlName="paysFederalExciseTaxes"
                        class="sm-label"
                      >
                        Does your business pay federal excise taxes?
                      </mat-checkbox>
                      <div
                        *ngIf="
                          einApplicationForm.get('paysFederalExciseTaxes')
                            ?.value
                        "
                        class="form-row previous-tax-id-row"
                      >
                        <mat-form-field
                          appearance="outline"
                          class="form-field-full"
                        >
                          <input
                            matInput
                            formControlName="previousFederalTaxId"
                            placeholder="Previous Federal Tax ID (XX-XXXXXXX)"
                            mask="00-0000000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('previousFederalTaxId')
                                ?.hasError('required')
                            "
                          >
                            Federal Tax ID is required
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <mat-checkbox
                        formControlName="hireEmployeeIn12Months"
                        class="sm-label"
                      >
                        Do you already have or expect to hire an employee within
                        12 months, excluding owners?
                      </mat-checkbox>
                    </div>

                    <div
                      *ngIf="
                        einApplicationForm.get('hireEmployeeIn12Months')?.value
                      "
                      class="employee-details-section"
                    >
                      <h4 class="sub-section-heading">Employee Details</h4>
                      <div class="form-row">
                        <mat-form-field
                          appearance="outline"
                          class="form-field-quarter"
                        >
                          <mat-label>Date of first wage</mat-label>
                          <input
                            matInput
                            [matDatepicker]="firstWageDate"
                            formControlName="firstWageDate"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="firstWageDate"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #firstWageDate></mat-datepicker>
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('firstWageDate')
                                ?.hasError('required')
                            "
                          >
                            Required
                          </mat-error>
                        </mat-form-field>

                        <mat-form-field
                          appearance="outline"
                          class="form-field-quarter"
                        >
                          <mat-label>Household Employees</mat-label>
                          <input
                            type="number"
                            matInput
                            formControlName="householdEmployees"
                            placeholder="0"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('householdEmployees')
                                ?.hasError('required')
                            "
                          >
                            Required
                          </mat-error>
                        </mat-form-field>

                        <mat-form-field
                          appearance="outline"
                          class="form-field-quarter"
                        >
                          <mat-label>Agricultural Employees</mat-label>
                          <input
                            type="number"
                            matInput
                            formControlName="agriculturalEmployees"
                            placeholder="0"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('agriculturalEmployees')
                                ?.hasError('required')
                            "
                          >
                            Required
                          </mat-error>
                        </mat-form-field>

                        <mat-form-field
                          appearance="outline"
                          class="form-field-quarter"
                        >
                          <mat-label>Other Employees</mat-label>
                          <input
                            type="number"
                            matInput
                            formControlName="otherEmployees"
                            placeholder="0"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('otherEmployees')
                                ?.hasError('required')
                            "
                          >
                            Required
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="form-row">
                        <div class="form-field-full">
                          <mat-checkbox
                            formControlName="fileAnnualPayrollTaxes"
                            class="sm-label"
                          >
                            If you expect your total yearly payroll tax to be
                            <strong>$1,000 or less</strong> (usually $5,000 or
                            less in wages) and want to file
                            <strong>Form 944 annually</strong>
                            instead of quarterly Form 941, check this box.
                          </mat-checkbox>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="editable-section">
                    <h3 class="panel-title">Mailing Address</h3>
                    <div class="form-row">
                      <div class="form-field-full">
                        <mat-checkbox
                          formControlName="usePhysicalAddressForMailing"
                          (change)="
                            onMailingAddressCheckboxChange($event.checked)
                          "
                          class="d-block my-3 text-secondary green-tick-checkbox sm-label"
                        >
                          Use business address for mailing (uncheck if
                          different)
                        </mat-checkbox>
                      </div>
                    </div>

                    <div *ngIf="isDifferentMailingAddress">
                      <p class="description">
                        Please enter your mailing address (it is different from
                        your business address).
                      </p>
                      <div class="form-row">
                        <mat-form-field
                          appearance="outline"
                          class="form-field-half"
                        >
                          <mat-label>Street Address *</mat-label>
                          <input
                            matInput
                            formControlName="mailingStreetAddress"
                            placeholder="123 Main Street"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="120"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingStreetAddress')
                                ?.hasError('required')
                            "
                          >
                            Address can’t be empty!
                          </mat-error>
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingStreetAddress')
                                ?.hasError('pattern') &&
                              !einApplicationForm
                                .get('mailingStreetAddress')
                                ?.hasError('required')
                            "
                          >
                            Invalid Address</mat-error
                          >
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingStreetAddress')
                                ?.hasError('minlength')
                            "
                          >
                            Address must be at least 5 characters</mat-error
                          >
                        </mat-form-field>
                        <mat-form-field
                          appearance="outline"
                          class="form-field-half"
                        >
                          <mat-label>State *</mat-label>
                          <mat-select
                            formControlName="mailingState"
                            placeholder="Select State"
                            [errorStateMatcher]="errorStateMatcher"
                          >
                            <mat-option
                              *ngFor="let state of states"
                              [value]="state"
                            >
                              {{ state }}
                            </mat-option>
                          </mat-select>
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingState')
                                ?.hasError('required')
                            "
                          >
                            State is required
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="form-row">
                        <mat-form-field
                          appearance="outline"
                          class="form-field-half"
                        >
                          <mat-label>City *</mat-label>
                          <input
                            matInput
                            formControlName="mailingCity"
                            placeholder="City"
                            [errorStateMatcher]="errorStateMatcher"
                            maxlength="60"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingCity')
                                ?.hasError('required')
                            "
                          >
                            City name required
                          </mat-error>
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingCity')
                                ?.hasError('pattern') &&
                              einApplicationForm.get('mailingCity')?.invalid
                            "
                          >
                            Use Only letters
                          </mat-error>
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingCity')
                                ?.hasError('minlength')
                            "
                          >
                            City must be at least 5 characters
                          </mat-error>
                        </mat-form-field>
                        <mat-form-field
                          appearance="outline"
                          class="form-field-half"
                        >
                          <mat-label>ZIP Code *</mat-label>
                          <input
                            matInput
                            formControlName="mailingZipCode"
                            placeholder="12345"
                            mask="00000"
                            [dropSpecialCharacters]="false"
                            [errorStateMatcher]="errorStateMatcher"
                          />
                          <mat-error
                            *ngIf="
                              einApplicationForm
                                .get('mailingZipCode')
                                ?.hasError('required')
                            "
                          >
                            ZIP Code is required
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                  <div class="editable-section">
                    <h3 class="panel-title">Contact Information</h3>
                    <div class="form-row">
                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label>Email Address *</mat-label>
                        <input
                          matInput
                          placeholder="your.email@example.com"
                          type="email"
                          formControlName="email"
                          [errorStateMatcher]="errorStateMatcher"
                        />
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('email')
                              ?.hasError('required')
                          "
                        >
                          Email is a must
                        </mat-error>
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('email')
                              ?.hasError('pattern') &&
                            !einApplicationForm
                              .get('email')
                              ?.hasError('required')
                          "
                        >
                          Please enter a valid email address</mat-error
                        >
                      </mat-form-field>

                      <mat-form-field
                        appearance="outline"
                        class="form-field-half"
                      >
                        <mat-label>Phone Number *</mat-label>
                        <input
                          matInput
                          placeholder="(123) 456-7890"
                          formControlName="phoneNumber"
                          mask="(000) 000-0000"
                          [dropSpecialCharacters]="false"
                          [errorStateMatcher]="errorStateMatcher"
                        />
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('phoneNumber')
                              ?.hasError('required')
                          "
                        >
                          Phone number is required to reach you!
                        </mat-error>
                        <mat-error
                          *ngIf="
                            einApplicationForm
                              .get('phoneNumber')
                              ?.hasError('pattern') &&
                            !einApplicationForm
                              .get('phoneNumber')
                              ?.hasError('required')
                          "
                        >
                          Phone number is not valid!
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                  <!-- <div class="submission-area">
        <p class="agreement-text">
          By clicking this
          <a
            (click)="openTermsDialog('regForm4')"
            class="terms-link"
            style="cursor: pointer"
            ><strong>“Agree & Submit ”</strong></a
          >
          you confirm that all the information above is accurate and complete.
        </p>
        <mat-checkbox
          class="agreement-checkbox green-tick-checkbox"
          [(ngModel)]="isAgreedRegForm4"
          [disabled]="!isAgreedRegForm4"
          [checked]="isAgreedRegForm4"
          [ngModelOptions]="{ standalone: true }"
        >
          I accept the terms and conditions of the EIN application process.
        </mat-checkbox>

        <span
          [matTooltip]="
            einApplicationForm.invalid || !isAgreedRegForm4
              ? 'Please fill all required fields before submitting'
              : ''
          "
          matTooltipPosition="above"
        >
          <button
            mat-flat-button
            class="submit-button"
            [disabled]="einApplicationForm.invalid || !isAgreedRegForm4"
            (click)="submitEinApplication()"
          >
            Submit EIN Application
          </button>
        </span>
      </div> -->
                </div>
              </div>
              <!-- EIN Agreement & Confirmation -->
              <div class="text-center mb-4">
                <p class="fw-bold text-muted justify-text mb-2">
                  By clicking this, you confirm that all the information above
                  is accurate and complete.
                </p>

                <mat-checkbox
                  class="d-block my-3 justify-text green-tick-checkbox"
                  [checked]="isAgreedRegForm4"
                  (change)="onTermsCheckboxClick($event, 'regForm4')"
                >
                  I accept the terms and conditions of the EIN application
                  process.
                </mat-checkbox>
              </div>
              <br />

              <div class="d-flex justify-content-end mt-4">
                <!-- <button

mat-flat-button

class="button-prev"

(click)="goToPreviousStep(stepper)"

>

Prev

</button> -->

                <span
                  [matTooltip]="
                    einApplicationForm.invalid || !isAgreedRegForm4
                      ? 'Please fill all required fields before submitting'
                      : ''
                  "
                  matTooltipPosition="above"
                >
                  <button
                    mat-flat-button
                    class="button-all"
                    [disabled]="einApplicationForm.invalid || !isAgreedRegForm4"
                    (click)="submitEinApplication()"
                  >
                    Submit EIN Application
                  </button>
                </span>
              </div>
            </div>
          </mat-step>

          <!-- STEP 15 : Congratulation-->
          <mat-step label="Confirmation">
            <h2 class="fw-bold text-center heading mb-4 wizard-title">
              🎉 Congrats! Your LLC Formation Is Underway
            </h2>
            <div class="row">
              <div class="col-lg-8">
                <p class="text-muted justify-text mb-5">
                  You’ve completed all the steps — your LLC is officially in
                  progress! We’ll now file your documents with the state to make
                  it all official.
                </p>

                <h3 class="fw-semibold text-dark mt-4 wizard-title">
                  What Happens Next?
                </h3>
                <ul class="list-group list-group-flush fs-5">
                  <li class="list-group-item border-0 py-2">
                    We’ll file your documents with the state on your behalf
                  </li>
                  <li class="list-group-item border-0 py-2">
                    Once approved, you’ll receive your official LLC formation
                    documents
                  </li>
                  <li class="list-group-item border-0 py-2">
                    You’ll be ready to open a bank account, hire employees, and
                    start operations
                  </li>
                </ul>

                <h3 class="sub-heading text-center wizard-subtitle">
                  Thank you for trusting us to help you form your business —
                  we’re excited to be part of your journey!
                </h3>
                <br />
              </div>
              <div class="col-lg-4">
                <div class="card shadow-lg border-0 p-4">
                  <div class="mt-6">
                    <div class="text-center my-4">
                      <img
                        src="assets/completed.jpg"
                        alt="LLC registration completed confirmation screen"
                        class="img-fluid shadow rounded-4 border elegant-hover-img"
                        style="max-width: 310px"
                      />
                    </div>
                  </div>
                  <!-- <h2 class="fw-semibold text-dark mt-4">
                    You're Officially on the Map...!
                  </h2> -->
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center">
              <button
                mat-flat-button
                class="button-allset"
                (click)="finishProcess()"
              >
                All Set
              </button>
            </div>
          </mat-step>
          <mat-step
            ><h2 class="fw-bold text-center heading mb-4 wizard-title">
              🎉 Congrats! Your LLC Formation Is Underway
            </h2>
            <div class="row">
              <div class="col-lg-8">
                <p class="text-muted justify-text mb-5">
                  You’ve completed all the steps — your LLC is officially in
                  progress! We’ll now file your documents with the state to make
                  it all official.
                </p>

                <h3 class="fw-semibold text-dark mt-4 wizard-title">
                  What Happens Next?
                </h3>
                <ul class="list-group list-group-flush fs-5">
                  <li class="list-group-item border-0 py-2">
                    We’ll file your documents with the state on your behalf
                  </li>
                  <li class="list-group-item border-0 py-2">
                    Once approved, you’ll receive your official LLC formation
                    documents
                  </li>
                  <li class="list-group-item border-0 py-2">
                    You’ll be ready to open a bank account, hire employees, and
                    start operations
                  </li>
                </ul>

                <h3 class="sub-heading text-center wizard-subtitle">
                  Thank you for trusting us to help you form your business —
                  we’re excited to be part of your journey!
                </h3>
                <br />
              </div>
              <div class="col-lg-4">
                <div class="card shadow-lg border-0 p-4">
                  <div class="mt-6">
                    <div class="text-center my-4">
                      <img
                        src="assets/completed.jpg"
                        alt="LLC registration completed confirmation screen"
                        class="img-fluid shadow rounded-4 border elegant-hover-img"
                        style="max-width: 310px"
                      />
                    </div>
                  </div>
                  <!-- <h2 class="fw-semibold text-dark mt-4">
                    You're Officially on the Map...!
                  </h2> -->
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center">
              <button
                mat-flat-button
                class="button-allset"
                (click)="finishProcess()"
              >
                All Set
              </button>
            </div>
          </mat-step>
        </mat-stepper>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Right Column (Dynamic Content) -->
  <div class="col-lg-4 right-column">
    <mat-card class="cardWithShadow">
      <mat-card-content class="p-y-24">
        <!-- Right Section for Step 1 -->
        <!-- Step 1 (index 0) -->
        <ng-container *ngIf="stepper.selectedIndex === 0">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title mt-24">
              Why the State You Choose for Your LLC Matters ?
            </h3>
            <p class="rs-text rs-muted">
              When forming an LLC, the state you choose impacts
              <strong
                >taxes, filing fees, legal structure, and ongoing
                compliance.</strong
              >
              Most business owners form their LLC in the state where they
              operate, but some choose states like Delaware, Wyoming, or Nevada
              for their business-friendly laws and privacy protections.
            </p>

            <h3 class="rs-title mt-24">What Are the State Fees?</h3>
            <p class="rs-text rs-muted">
              When forming an LLC, state filing fees are required to officially
              register your business. These fees vary depending on the state and
              can range from <strong>$40 to $500 or more</strong>.
            </p>

            <h3 class="rs-title mt-24">Benefits of Forming an LLC</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                <strong>Limited Personal Liability</strong>
              </li>
              <li class="rs-list__item">
                <strong>Flexible Management</strong>
              </li>
              <li class="rs-list__item">
                <strong>Pass-Through Taxation</strong>
              </li>
              <li class="rs-list__item">
                <strong>Business Credibility</strong>
              </li>
            </ul>
          </div>
        </ng-container>

        <!-- Step 2 (index 1) -->
        <ng-container *ngIf="stepper.selectedIndex === 1">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Think About Your Business Name</h3>
            <p class="rs-text rs-muted">
              Your business name is more than just a label — it's the first
              impression of your brand, your mission, and your professionalism.
              Choosing the right name helps you stand out, build trust, and
              connect with your audience.
            </p>

            <h3 class="rs-title mt-24">
              What to Consider When Choosing a Name ?
            </h3>
            <ul class="rs-list">
              <li class="rs-list__item"><strong>Is it Unique?</strong></li>
              <li class="rs-list__item">
                <strong>Is it Memorable & Clear?</strong>
              </li>
              <li class="rs-list__item">
                <strong>Is the Domain Available?</strong>
              </li>
              <li class="rs-list__item">
                <strong>Does It Reflect Your Brand?</strong>
              </li>
            </ul>

            <div class="rs-center mt-16">
              <button mat-flat-button class="btn btn--primary btn--wide">
                Learn More
              </button>
            </div>

            <div class="mt-24">
              <h3 class="rs-title rs-center">What is an LLC?</h3>
              <div class="rs-media-16x9 rs-media-rounded rs-media-shadow">
                <video width="100%" controls class="rs-media-rounded">
                  <!-- <source src="/assets/videos/llc-explained.mp4" type="video/mp4" /> -->
                  Your browser does not support the video tag.
                </video>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Step 3 (index 2) -->
        <ng-container *ngIf="stepper.selectedIndex === 2">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Why Does This Date Matter?</h3>
            <p class="rs-text rs-muted">
              Your LLC formation date is the official start of your business in
              the eyes of the state. It affects your legal status, taxes, and
              reporting deadlines — so it's important to choose it wisely
            </p>
            <ul class="rs-list">
              <li class="rs-list__item"><strong>Legal Recognition</strong></li>
              <li class="rs-list__item"><strong>Tax Timing</strong></li>
              <li class="rs-list__item">
                <strong>Annual Reports & Fees</strong>
              </li>
              <li class="rs-list__item">
                <strong>Operational Readiness</strong>
              </li>
            </ul>
            <p class="rs-text rs-muted">
              In many states, you can pick a future start date — perfect for
              syncing your launch plans or managing year-end finances
            </p>
          </div>
        </ng-container>

        <!-- Step 4 (index 3) -->
        <ng-container *ngIf="stepper.selectedIndex === 3">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">What to Include?</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                <strong>What Your Business Does :</strong> Briefly describe the
                products or services you offer.
              </li>
              <li class="rs-list__item">
                <strong>Your Purpose :</strong> Explain why your business exists
                or what problem it solves.
              </li>
              <li class="rs-list__item">
                <strong>How You Operate :</strong> Mention your business model
                or structure — online, physical location, or service-based.
              </li>
              <li class="rs-list__item">
                <strong>Target Market or Industry:</strong> You can also include
                who you serve or your industry type.
              </li>
              <li class="rs-list__item">
                <strong>Legal Structure:</strong> Mention it’s an LLC for
                liability protection.
              </li>
            </ul>
          </div>
        </ng-container>

        <!-- Step 5 (index 4) -->
        <ng-container *ngIf="stepper.selectedIndex === 4">
          <div class="rs-panel rs-panel--elevated rs-panel--borderless">
            <div class="rs-panel--padded">
              <h3 class="rs-title">Who Should Be the Primary Contact?</h3>
              <p class="rs-text rs-muted">
                The primary contact is the person responsible for managing key
                communications about your LLC. This role is important during and
                after the filing process.
              </p>
              <div class="rs-center mt-16">
                <img
                  src="/assets/primary contact.jpg"
                  alt="Primary contact details to register your LLC"
                  class="rs-img rs-media-rounded rs-media-shadow elegant-hover-img"
                  style="max-width: 200px"
                />
              </div>

              <h3 class="rs-title mt-24">
                Responsibilities of the Primary Contact
              </h3>
              <ul class="rs-list">
                <li class="rs-list__item">
                  Receives official updates and requests from the state
                </li>
                <li class="rs-list__item">
                  Handles filing-related questions or document requests
                </li>
                <li class="rs-list__item">
                  Manages legal notices, compliance reminders, and annual
                  reports
                </li>
              </ul>
            </div>
          </div>
        </ng-container>

        <!-- Step 6 (index 5) -->
        <ng-container *ngIf="stepper.selectedIndex === 5">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">
              What Is a Registered Agent — And Why You Need One
            </h3>
            <p class="rs-text rs-muted">
              Every state requires your LLC or corporation to have a Registered
              Agent — a person or service officially designated to receive legal
              documents, state notices, and compliance reminders on behalf of
              your business.
            </p>

            <div class="rs-center mt-16">
              <img
                src="assets/agent.jpg"
                alt="Registered agent service to help file a LLC online"
                class="rs-img rs-media-rounded rs-media-shadow elegant-hover-img"
                style="max-width: 200px"
              />
            </div>

            <h3 class="rs-title mt-24">What Does a Registered Agent Do ?</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                Receives official mail and legal notices (such as lawsuits or
                tax forms)
              </li>
              <li class="rs-list__item">
                Maintains regular business hours to ensure timely delivery
              </li>
              <li class="rs-list__item">
                Keeps you informed about compliance deadlines like annual
                reports
              </li>
              <li class="rs-list__item">
                Protects your privacy by using their address instead of yours
                (great for home-based businesses)
              </li>
            </ul>

            <h3 class="rs-title mt-24">Don’t Have a Registered Agent Yet?</h3>
            <p class="rs-text rs-muted">
              No problem — we can act as your Registered Agent in all 50 states.
              We’ll handle all your official correspondence and help keep your
              business in good standing. Stay compliant. Stay protected. Let us
              handle it for you.
            </p>
          </div>
        </ng-container>

        <!-- Step 7 (index 6) -->
        <ng-container *ngIf="stepper.selectedIndex === 6">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Final Review & Confirmation</h3>
            <p class="rs-text rs-muted">
              Before submitting your LLC formation request, please take a moment
              to carefully review the details you’ve provided. Ensuring accuracy
              now will help prevent processing delays and the need for
              corrections.
            </p>

            <h3 class="rs-title mt-24">Key Sections to Verify:</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                <strong>Business Details:</strong> Confirm your selected state,
                business name, and LLC suffix.
              </li>
              <li class="rs-list__item">
                <strong>Formation Details:</strong> Review your formation date
                and business description.
              </li>
              <li class="rs-list__item">
                <strong>Primary Contact Information:</strong> Ensure your name,
                email, and phone number are correct.
              </li>
              <li class="rs-list__item">
                <strong>Registered Agent Details:</strong> Verify the agent’s
                name, address, city, state, and zipCode code.
              </li>
            </ul>

            <h3 class="rs-title mt-24">Agreement & Submission</h3>
            <p class="rs-text rs-muted">
              By clicking <strong>“Agree & Submit,”</strong> you confirm that
              all the details are accurate and complete. Incorrect information
              may lead to delays or additional fees for changes.
            </p>

            <div class="notice notice--warning mt-16">
              ⚠
              <span class="notice__text"
                ><strong>Tip:</strong> If you need to make changes, go back and
                update your details before proceeding.</span
              >
            </div>
          </div>
        </ng-container>

        <!-- Step 8 (index 7) -->
        <ng-container *ngIf="stepper.selectedIndex === 7">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Why Do I Need an EIN?</h3>
            <p class="rs-text rs-muted">
              An EIN (Tax ID) is like a Social Security Number but for your
              business. It's issued by the IRS and is required for:
            </p>

            <h3 class="rs-title mt-16">Legal & Financial Benefits</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                <strong>Open a Business Bank Account - </strong> Banks require
                an EIN to set up a business checking account.
              </li>
              <li class="rs-list__item">
                <strong>Hire Employees - </strong> You must have an EIN before
                hiring or paying employees legally.
              </li>
              <li class="rs-list__item">
                <strong>File Business Taxes - </strong> EIN is used for all
                federal tax filings and reporting.
              </li>
              <li class="rs-list__item">
                <strong>Apply for Business Credit or Loans - </strong> Build
                business credit and access funding opportunities faster.
              </li>
              <li class="rs-list__item">
                <strong>Protect Your Privacy - </strong> Avoid using your
                personal SSN for business transactions.
              </li>
            </ul>
          </div>
        </ng-container>

        <!-- Step 9 (index 8) -->
        <ng-container *ngIf="stepper.selectedIndex === 8">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Why is this Recommended?</h3>
            <p class="rs-text rs-muted">
              An Operating Agreement defines key roles, responsibilities, and
              financial structures of your LLC. Most states recommend having one
              to prevent disputes and ensure smooth business operations.
            </p>

            <div class="mt-24">
              <img
                src="assets/operating.jpg"
                alt="Operating agreement needed to open your LLC"
                class="rs-img rs-media-rounded rs-media-shadow"
                style="width: 100%"
              />
            </div>
          </div>
        </ng-container>

        <!-- Right Section for Step 9 (Expedited Service FAQs) -->
        <ng-container *ngIf="stepper.selectedIndex === 9">
          <!-- Stripe-Focused FAQ Section -->
          <div class="pc-faq-section">
            <h3 class="pc-faq-title">Frequently Asked Questions</h3>

            <mat-accordion class="pc-accordion">
              <mat-expansion-panel class="pc-expansion-panel">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Which part of my order does the rush service apply to?
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="pc-faq-content">
                  <p>
                    The rush service applies to the *filing and approval* of
                    your LLC formation.
                  </p>
                </div>
              </mat-expansion-panel>

              <mat-expansion-panel class="pc-expansion-panel">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Can you guarantee my LLC will be ready on time?
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="pc-faq-content">
                  <p>
                    While we strive for *24-hour processing*, external factors
                    may affect timing.
                  </p>
                </div>
              </mat-expansion-panel>

              <mat-expansion-panel class="pc-expansion-panel">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    How can I track my formation status?
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="pc-faq-content">
                  <p>
                    You can track your formation status through our **online
                    portal**.
                  </p>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
            <div class="text-center my-4">
              <img
                src="assets/expedited service.jpg"
                alt="Expedited LLC service to quickly set up an LLC"
                class="img-fluid rounded shadow-sm w-100"
              />
            </div>
          </div>
        </ng-container>

        <!-- Right Section for Step 10 (Payment Summary) -->
        <ng-container *ngIf="stepper.selectedIndex === 10">
          <div class="payment-confidence-card">
            <h3 class="pc-heading">Pay with Confidence for LLC Formation</h3>

            <ul class="pc-feature-list">
              <li class="pc-feature-item">
                <div class="pc-icon"><mat-icon>attach_money</mat-icon></div>
                <span>Guaranteed secure payment for LLC formation</span>
              </li>
              <li class="pc-feature-item">
                <div class="pc-icon"><mat-icon>verified</mat-icon></div>
                <span>100% satisfaction with your LLC filing</span>
              </li>
              <li class="pc-feature-item">
                <div class="pc-icon"><mat-icon>support_agent</mat-icon></div>
                <span>Expert support to guide you through the process</span>
              </li>
            </ul>

            <div class="pc-info-box">
              <div class="pc-info-stripe"></div>
              <div>
                <strong>Save on LLC Filing Costs</strong>
                <p>
                  You may be eligible to save on formation costs and receive
                  special promotions for LLC services. Consult with our team for
                  more details on potential savings.
                </p>
              </div>
            </div>

            <div class="pc-trust">
              <p class="pc-trust-heading">
                Excellent Service <span class="stars">★★★★★</span>
              </p>
              <p class="pc-trust-sub">
                20,000+ customers satisfied with their LLC formation
              </p>
              <p class="pc-trust-logo">
                <mat-icon color="warn">star</mat-icon> Trustpilot
              </p>
            </div>
            <!-- Enhanced FAQ Section -->
            <div class="pc-faq-section">
              <h3 class="pc-faq-title">Common Questions</h3>

              <mat-accordion class="pc-accordion">
                <mat-expansion-panel class="pc-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      What payment methods do you accept?
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="pc-faq-content">
                    <p>
                      We accept credit/debit cards, bank transfers (ACH),
                      checks, and PayPal for your LLC filing fees.
                    </p>
                  </div>
                </mat-expansion-panel>

                <mat-expansion-panel class="pc-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      When will my payment be processed?
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="pc-faq-content">
                    <p>
                      Payments are processed immediately at checkout; you’ll
                      receive a confirmation email once the transaction
                      succeeds.
                    </p>
                  </div>
                </mat-expansion-panel>

                <mat-expansion-panel class="pc-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      Can I get a refund if needed?
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="pc-faq-content">
                    <p>
                      Yes—refunds are available within 30 days of payment,
                      subject to our terms and any processing fees.
                    </p>
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>
        </ng-container>

        <!-- Right Section for Step 11 (Payment) -->
        <ng-container *ngIf="stepper.selectedIndex === 11">
          <div class="payment-confidence-card">
            <h3 class="pc-heading">Payment Disclaimer</h3>
            <div class="pc-info-box">
              <div class="pc-info-stripe"></div>
              <div>
                <p>
                  Please review all payment terms carefully before proceeding
                  with your LLC formation. By completing the payment, you
                  acknowledge and agree to the terms and conditions as outlined
                  in our policy. If you have any questions or concerns, please
                  contact our support team for clarification before proceeding.
                </p>
              </div>
            </div>
            <h3 class="pc-heading">Pay with Confidence for LLC Formation</h3>

            <ul class="pc-feature-list">
              <li class="pc-feature-item">
                <div class="pc-icon"><mat-icon>attach_money</mat-icon></div>
                <span>Guaranteed secure payment for LLC formation</span>
              </li>
              <li class="pc-feature-item">
                <div class="pc-icon"><mat-icon>verified</mat-icon></div>
                <span>100% satisfaction with your LLC filing</span>
              </li>
              <li class="pc-feature-item">
                <div class="pc-icon"><mat-icon>support_agent</mat-icon></div>
                <span>Expert support to guide you through the process</span>
              </li>
            </ul>

            <!-- Stripe-Focused FAQ Section -->
            <div class="pc-faq-section">
              <h3 class="pc-faq-title">Stripe Payment Benefits</h3>

              <mat-accordion class="pc-accordion">
                <mat-expansion-panel class="pc-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      How do I integrate Stripe payments?
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="pc-faq-content">
                    <p>
                      Use Stripe.js and your API keys to build a secure payment
                      form on the client, then process charges server‑side with
                      Stripe’s APIs.
                    </p>
                  </div>
                </mat-expansion-panel>

                <mat-expansion-panel class="pc-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      What fees does Stripe charge?
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="pc-faq-content">
                    <p>
                      In the US, Stripe’s standard fee is 2.9% + $0.30 per
                      successful card charge (rates vary by country and payment
                      method).
                    </p>
                  </div>
                </mat-expansion-panel>

                <mat-expansion-panel class="pc-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      Which payment methods are supported?
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="pc-faq-content">
                    <p>
                      Stripe supports all major cards, digital wallets (Apple
                      Pay, Google Pay), ACH, and many local methods like SEPA
                      and iDEAL.
                    </p>
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>
        </ng-container>

        <!-- Right Section for Step 11 (Management Style) -->
        <!-- Step 12: LLC Management Structure -->
        <ng-container *ngIf="stepper.selectedIndex === 12">
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">LLC Management Structure</h3>
            <p class="rs-text rs-muted">
              When forming an LLC, you’ll need to decide on your management
              structure — this defines who is responsible for making day-to-day
              decisions and running the business.
            </p>

            <h3 class="rs-title">Member-Managed LLC</h3>
            <p class="rs-text rs-muted">
              In a Member-Managed LLC, all owners (called members) share
              responsibility for the company’s daily operations
              <strong> best for :</strong>
            </p>
            <ul class="rs-list">
              <li class="rs-list__item">Small businesses with few owners</li>
              <li class="rs-list__item" *ngIf="needEin">
                Owners who want to be actively involved
              </li>
              <li class="rs-list__item" *ngIf="includeAgreement">
                Simple team structures
              </li>
            </ul>

            <h3 class="rs-title">Manager-Managed LLC</h3>
            <p class="rs-text rs-muted">
              In a Manager-Managed LLC, the members choose one or more managers
              (who may or may not be owners) to run the business, while the
              other members act more like passive investors
              <strong> best for :</strong>
            </p>
            <ul class="rs-list">
              <li class="rs-list__item">
                Larger teams or investor-backed businesses
              </li>
              <li class="rs-list__item" *ngIf="needEin">
                Members who don’t want to be involved in daily decisions
              </li>
              <li class="rs-list__item" *ngIf="includeAgreement">
                Professional management roles
              </li>
            </ul>
          </div>
        </ng-container>

        <!-- Step 13: Manager-managed (if chosen) -->
        <ng-container
          *ngIf="
            stepper.selectedIndex === 13 &&
            getManagementStyleFromSessionStorage() === 'manager'
          "
        >
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Manager-Managed LLC</h3>
            <p class="rs-text rs-muted">
              Let designated managers handle the day-to-day operations.<br />
              A Manager-Managed LLC is ideal for businesses where not all owners
              want to be involved in daily decision-making. Instead, members
              appoint one or more managers to run the business, while others may
              remain passive owners or investors.
            </p>

            <div class="rs-center mt-16">
              <img
                src="assets/manager-managed.jpg"
                alt="Manager-managed LLC structure for filing online"
                class="rs-img rs-media-rounded rs-media-shadow elegant-hover-img"
                style="max-width: 200px"
              />
            </div>

            <h3 class="rs-title mt-24">Why Choose Manager-Managed?</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                Clear Separation between ownership and management
              </li>
              <li class="rs-list__item" *ngIf="needEin">
                Ideal for larger LLCs or outside investors
              </li>
              <li class="rs-list__item" *ngIf="includeAgreement">
                Lets members focus on big-picture goals while managers handle
                operations
              </li>
              <li class="rs-list__item" *ngIf="includeAgreement">
                Managers can be owners or external professionals
              </li>
            </ul>

            <h3 class="rs-title mt-24">How It Works:</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                Members vote or agree on who will serve as the manager(s)
              </li>
              <li class="rs-list__item" *ngIf="needEin">
                Managers make daily decisions, sign contracts, and oversee
                operations
              </li>
              <li class="rs-list__item" *ngIf="includeAgreement">
                Members retain ownership, but not necessarily decision-making
                authority
              </li>
            </ul>
          </div>

          <h3 class="rs-title mt-24">Prefer to keep your address private ?</h3>
          <p class="rs-text rs-muted">
            Your business address becomes public once your LLC is filed with the
            state. Prefer to keep your personal or home address private? Use
            ours instead. We’ll receive state mail and legal notices on your
            behalf. Stay compliant and protect your privacy with a secure,
            professional address.
          </p>
        </ng-container>

        <!-- Step 13/14: Member-managed (or 14 with manager chosen) -->
        <ng-container
          *ngIf="
            (stepper.selectedIndex === 13 &&
              getManagementStyleFromSessionStorage() === 'member') ||
            (stepper.selectedIndex === 14 &&
              getManagementStyleFromSessionStorage() === 'manager')
          "
        >
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded rs-panel--narrow"
          >
            <h3 class="rs-title">👥 Member-Managed LLC</h3>

            <p class="rs-text rs-muted">
              In a <strong>Member-Managed LLC</strong>, all owners (members)
              take part in managing the business. They share control over daily
              operations, decision-making, and legal responsibilities. Each
              member must be listed with their contact details and ownership
              percentage. This structure is ideal for small teams who want to
              stay actively involved.
            </p>

            <div class="rs-center mt-16">
              <img
                src="assets/member-managed.jpg"
                alt="Member-managed LLC structure to create LLC online"
                class="rs-img rs-media-rounded rs-media-shadow elegant-hover-img"
                style="max-width: 200px"
              />
            </div>

            <h3 class="rs-title mt-24">How It Works:</h3>
            <p class="rs-text rs-muted">
              In a Member-Managed LLC, all members (owners) share responsibility
              for running the business.<br />
              They’re involved in day-to-day operations, including
              decision-making, signing contracts, and managing finances. This
              setup is common for small businesses where each owner wants an
              active role.<br />
              It’s a simple and collaborative structure that gives everyone
              equal control and accountability.
            </p>

            <div class="notice notice--info mt-16">
              <span class="notice__text">
                Total ownership must equal
                <span class="notice__emphasis">100%</span> before proceeding.
              </span>
            </div>

            <h3 class="rs-title mt-24">
              Prefer to keep your address private ?
            </h3>
            <p class="rs-text rs-muted">
              Your business address becomes public once your LLC is filed with
              the state. Prefer to keep your personal or home address private?
              Use ours instead. We’ll receive state mail and legal notices on
              your behalf. Stay compliant and protect your privacy with a
              secure, professional address.
            </p>
          </div>
        </ng-container>

        <!-- Step 14/15: Address Guidance -->
        <ng-container
          *ngIf="
            (stepper.selectedIndex === 14 &&
              getManagementStyleFromSessionStorage() === 'member') ||
            (stepper.selectedIndex === 15 &&
              getManagementStyleFromSessionStorage() === 'manager')
          "
        >
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">
              Understanding Business Address Requirements
            </h3>
            <p class="rs-text rs-muted">
              When forming an LLC, you must provide a physical business address
              — <strong>P.O. Boxes are not accepted by most states.</strong
              ><br />
              This address becomes part of the public record and is used for
              receiving official government correspondence.<br />
              It must be a valid U.S. street address where someone can receive
              mail during regular business hours.<br />
              If you prefer to keep your personal or home address private, you
              can choose to use <strong>our address instead.</strong><br />
            </p>

            <div class="rs-center mt-16">
              <img
                src="assets/address.jpg"
                alt="Business address required to register your LLC online"
                class="rs-img rs-media-rounded rs-media-shadow elegant-hover-img"
                style="max-width: 250px"
              />
            </div>
          </div>
        </ng-container>

        <!-- Step 15/16: Review & Confirm Management Cycle -->
        <ng-container
          *ngIf="
            (stepper.selectedIndex === 15 &&
              getManagementStyleFromSessionStorage() === 'member') ||
            (stepper.selectedIndex === 16 &&
              getManagementStyleFromSessionStorage() === 'manager')
          "
        >
          <div
            class="rs-panel rs-panel--elevated rs-panel--borderless rs-panel--padded"
          >
            <h3 class="rs-title">Review & Confirm Management Cycle</h3>
            <p class="rs-text rs-muted">
              Below is your selected <b>management style</b> for your LLC.
              Please review carefully. If any changes are needed, go back and
              update your selection.
            </p>

            <h3 class="rs-title mt-24">Key Sections to Verify:</h3>
            <ul class="rs-list">
              <li class="rs-list__item">
                <strong>Management Style:</strong> Confirm if your LLC is
                <b>Member-Managed</b> or <b>Manager-Managed</b>.
              </li>
              <li class="rs-list__item">
                <strong>Ownership Distribution:</strong> Ensure all ownership
                percentages total <b>100%</b>.
              </li>
              <li class="rs-list__item">
                <strong>Manager Details:</strong> If manager-managed, verify the
                names, emails, and contact numbers of managers.
              </li>
              <li class="rs-list__item">
                <strong>Business Address:</strong> Confirm your selected
                business address or the provided registered address.
              </li>
            </ul>

            <h3 class="rs-title mt-24">Agreement & Submission</h3>
            <p class="rs-text rs-muted">
              By clicking <strong>“Agree & Submit,”</strong> you confirm that
              all the details are accurate and complete. Incorrect information
              may lead to delays or additional fees for changes.
            </p>

            <div class="notice notice--warning mt-16">
              ⚠
              <span class="notice__text"
                ><strong>Tip:</strong> If you need to make changes, go back and
                update your details before proceeding.</span
              >
            </div>
          </div>
        </ng-container>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<!-- dialog for register agent  -->
<ng-template #secureDialog>
  <div class="secure-dialog-content animate__animated animate__fadeIn">
    <h2 mat-dialog-title class="fw-semibold fs-6 mb-3 wizard-title">
      Are you sure you can meet this state requirement?
    </h2>

    <!-- Subtitle -->
    <p mat-dialog-content class="wizard-description" style="line-height: 1.5">
      Most business owners choose <strong>Clear InCorp</strong> as their
      Registered Agent — because meeting the requirements alone can be a real
      challenge.
    </p>

    <!-- State Requirement Tag -->
    <div class="state-requirement-badge mb-3">
      <mat-icon>warning</mat-icon>
      <span>State requirement</span>
    </div>

    <!-- Address Requirement Box -->
    <mat-dialog-content
      class="p-3 rounded m-3"
      style="background-color: #f9f9f9; margin: 1rem"
    >
      <div class="d-flex">
        <!-- Yellow side bar -->
        <div
          style="width: 4px; background-color: #ffc048; margin-right: 10px"
        ></div>
        <div>
          <b class="text-dark fw-bold">Address requirements</b>
          <p class="mb-2 text-secondary" style="line-height: 1.5">
            You need to provide a <strong>physical address</strong> for your
            Registered Agent in the state you’re doing business. It can’t be a
            PO Box.
          </p>
          <p class="mb-0 text-secondary" style="line-height: 1.5">
            Depending on your state, that address may show up on public records
            with your name, phone number, and email address.
          </p>
        </div>
      </div>
    </mat-dialog-content>

    <!-- Actions -->
    <mat-dialog-actions align="end">
      <button mat-flat-button class="button-all" [mat-dialog-close]="true">
        &nbsp;Appoint ClearInCorp&nbsp;&nbsp;
      </button>
      <button
        mat-flat-button
        class="button-prev"
        style="margin-top: 5px"
        [mat-dialog-close]="false"
      >
        Appoint Someone Else
      </button>
    </mat-dialog-actions>
    <br />
  </div>
</ng-template>
